<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>mysql 初级 | eric_zht</title><meta name="author" content="eric_zht"><meta name="copyright" content="eric_zht"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="第一步操作 以管理员身份运行cmd，输入net start mysql 运行mysql 在cmd中输入mysql -h[地址] -P[端口] -u[用户名] -p[密码]  （使用本机的mysql数据库时，可以省略地址和端口）  MySQL命令行基本命令  列出当前数据库管理系统中有哪些数据库。  1show databases;    创建数据库，起名bjpowernode。  1create">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql 初级">
<meta property="og:url" content="http://example.com/2025/05/25/mysql%E5%88%9D%E7%BA%A7/index.html">
<meta property="og:site_name" content="eric_zht">
<meta property="og:description" content="第一步操作 以管理员身份运行cmd，输入net start mysql 运行mysql 在cmd中输入mysql -h[地址] -P[端口] -u[用户名] -p[密码]  （使用本机的mysql数据库时，可以省略地址和端口）  MySQL命令行基本命令  列出当前数据库管理系统中有哪些数据库。  1show databases;    创建数据库，起名bjpowernode。  1create">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/image/icon.png">
<meta property="article:published_time" content="2025-05-24T16:00:00.000Z">
<meta property="article:modified_time" content="2025-08-03T08:55:46.544Z">
<meta property="article:author" content="eric_zht">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/image/icon.png"><link rel="shortcut icon" href="/image/favicon.png"><link rel="canonical" href="http://example.com/2025/05/25/mysql%E5%88%9D%E7%BA%A7/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'mysql 初级',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/image/icon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://pic.imgdb.cn/item/6741310cd29ded1a8c7a7799.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">eric_zht</span></a><a class="nav-page-title" href="/"><span class="site-name">mysql 初级</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">mysql 初级</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-05-24T16:00:00.000Z" title="发表于 2025-05-25 00:00:00">2025-05-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-08-03T08:55:46.544Z" title="更新于 2025-08-03 16:55:46">2025-08-03</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">19.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>68分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="第一步操作"><a href="#第一步操作" class="headerlink" title="第一步操作"></a>第一步操作</h1><ol>
<li>以管理员身份运行cmd，输入net start mysql 运行mysql</li>
<li>在cmd中输入<code>mysql -h[地址] -P[端口] -u[用户名] -p[密码]</code>  （使用本机的mysql数据库时，可以省略地址和端口）</li>
</ol>
<h1 id="MySQL命令行基本命令"><a href="#MySQL命令行基本命令" class="headerlink" title="MySQL命令行基本命令"></a>MySQL命令行基本命令</h1><hr>
<ol>
<li>列出当前数据库管理系统中有哪些数据库。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620402104809-379ae418-d997-4758-9a02-45bbfad7178e.png#averageHue=%23151311&height=162&id=eQifD&originHeight=162&originWidth=220&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5485&status=done&style=shadow&title=&width=220" alt="image.png"></p>
<ol start="2">
<li>创建数据库，起名bjpowernode。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database bjpowernode;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620402231403-ddd2c76f-3b9f-4477-9504-502328fe64fc.png#averageHue=%2317110f&height=262&id=WUuwT&originHeight=262&originWidth=341&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13990&status=done&style=shadow&title=&width=341" alt="image.png"></p>
<ol start="3">
<li>使用bjpowernode数据库。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use bjpowernode;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620402295297-4dbb2d54-4210-44c9-bc8f-c887327bfb8c.png#averageHue=%23151210&height=66&id=QOLYt&originHeight=66&originWidth=232&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3275&status=done&style=shadow&title=&width=232" alt="image.png"></p>
<ol start="4">
<li>查看当前用的是哪个数据库。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> database();</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620402349349-2786c9cb-8683-4d17-bd26-c73a7b451847.png#averageHue=%23131110&height=130&id=aq6GB&originHeight=130&originWidth=268&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5590&status=done&style=shadow&title=&width=268" alt="image.png"></p>
<ol start="5">
<li>查看当前数据库中有哪些表。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620402397890-84d73980-1046-4e83-b6cb-bdcc68ba7b57.png#averageHue=%23151210&height=53&id=qqu40&originHeight=53&originWidth=207&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2593&status=done&style=shadow&title=&width=207" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620402645490-1cd5d42e-5735-4c0a-8723-e4fb81c96b8a.png#averageHue=%23100f0e&height=461&id=fFKCv&originHeight=461&originWidth=516&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23780&status=done&style=shadow&title=&width=516" alt="image.png"></p>
<ol start="6">
<li>删除数据库bjpowernode。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> database bjpowernode;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620402497021-d7ff9bf3-3c9a-4c9c-bc5d-f5dece31188f.png#averageHue=%2312110f&height=242&id=MeI71&originHeight=242&originWidth=363&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12799&status=done&style=shadow&title=&width=363" alt="image.png"></p>
<ol start="7">
<li>退出mysql<ol>
<li>exit</li>
<li>quit</li>
<li>ctrl + c</li>
</ol>
</li>
<li>查看当前mysql版本</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> version();</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620468380301-0c326efb-a538-4271-b75d-ff5add0e453a.png#averageHue=%23121110&height=142&id=az14k&originHeight=142&originWidth=279&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5365&status=done&style=shadow&title=&width=279" alt="image.png"><br>还可以使用mysql.exe命令来查看版本信息（在没有登录mysql之前使用）：mysql –version<br><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620468207568-77aa05ff-8d65-47f6-b90d-2c176893a52f.png#averageHue=%2313110f&height=59&id=Ialy0&originHeight=59&originWidth=624&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6797&status=done&style=shadow&title=&width=624" alt="image.png"></p>
<h1 id="数据库表的概述"><a href="#数据库表的概述" class="headerlink" title="数据库表的概述"></a>数据库表的概述</h1><hr>
<table>
<thead>
<tr>
<th>name</th>
<th>age</th>
<th>gender</th>
</tr>
</thead>
<tbody><tr>
<td>张三</td>
<td>20</td>
<td>男</td>
</tr>
<tr>
<td>李四</td>
<td>22</td>
<td>女</td>
</tr>
</tbody></table>
<ul>
<li>以上就是数据库表格的直观展示形式。</li>
<li>表是数据库存储数据的基本单元，数据库存储数据的时候，是将数据存储在表对象当中的。为什么将数据存储在表中呢？因为表存储数据非常直观。</li>
<li>任何一张表都有行和列：<ul>
<li>行：记录（一行就是一条数据）</li>
<li>列：字段（name字段、age字段、gender字段）</li>
</ul>
</li>
<li>每个字段包含以下属性：<ul>
<li>字段名：name、age、gender都是字段的名字</li>
<li>字段的数据类型：每个字段都有数据类型，比如：字符类型、数字类型、日期类型</li>
<li>字段的数据长度：每个字段有可能会有长度的限制</li>
<li>字段的约束：比如某些字段要求该字段下的数据不能重复、不能为空等，用来保证表格中数据合法有效</li>
</ul>
</li>
</ul>
<h1 id="初始化数据"><a href="#初始化数据" class="headerlink" title="初始化数据"></a>初始化数据</h1><p>sql脚本：文件名是.sql，并且该文件中编写了大量的SQL语句，执行sql脚本程序就相当于批量执行SQL语句。</p>
<ul>
<li>执行SQL脚本文件，初始化数据库<ul>
<li>第一步：命令窗口登录mysql</li>
<li>第二步：创建数据库bjpowernode（如果之前已经创建就不需要再创建了）：create database bjpowernode;</li>
<li>第三步：使用数据库bjpowernode：use bjpowernode;</li>
<li>第四步：source命令执行sql脚本，注意：source命令后面是sql脚本文件的绝对路径。</li>
</ul>
</li>
</ul>
<p>        <img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620435073900-d9e19c5e-9b0e-4d09-a3ee-74471ec9ebb8.png#averageHue=%2315110f&height=225&id=EfIUK&originHeight=225&originWidth=444&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18044&status=done&style=shadow&title=&width=444" alt="image.png"></p>
<ul>
<li>第五步：查看是否初始化成功，执行：show tables;</li>
</ul>
<p>        <img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620435161519-44d66617-3323-4834-8f57-5db6cc4c8cf3.png#averageHue=%23151312&height=170&id=ir680&originHeight=170&originWidth=253&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6666&status=done&style=shadow&title=&width=253" alt="image.png"></p>
<ul>
<li>使用其他的mysql客户端工具也可以执行sql脚本，比如navicat。使用source命令执行sql脚本的优点：<strong>可支持大文件</strong>。</li>
</ul>
<h1 id="查询DQL专题"><a href="#查询DQL专题" class="headerlink" title="查询DQL专题"></a>查询DQL专题</h1><h2 id="简单查询"><a href="#简单查询" class="headerlink" title="简单查询"></a>简单查询</h2><h3 id="查一个字段"><a href="#查一个字段" class="headerlink" title="查一个字段"></a>查一个字段</h3><hr>
<p>查询一个字段说的是：一个表有多列，查询其中的一列。<br>语法格式：select 字段名 from 表名;</p>
<ul>
<li>select和from是关键字，不能随便写</li>
<li><strong>一条SQL语句必须以“;”结尾</strong></li>
<li><strong>对于SQL语句来说，大小写都可以</strong></li>
<li>字段名和表名属于标识符，按照表的实际情况填写，不知道字段名的，可以使用desc命令查看表结构</li>
</ul>
<p>案例1：查询公司中所有员工编号</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> empno <span class="keyword">from</span> emp; </span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620444005101-f8b17d19-7943-42da-868a-4353bbc39d72.png#averageHue=%230f0e0e&height=364&id=iefCx&originHeight=364&originWidth=331&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12803&status=done&style=shadow&title=&width=331" alt="image.png"><br>案例2：查询公司中所有员工姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ENAME <span class="keyword">FROM</span> EMP;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620444051586-c22b328d-726d-43a1-84c5-b61b053e4c76.png#averageHue=%2311100f&height=368&id=t1BP2&originHeight=368&originWidth=323&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15288&status=done&style=shadow&title=&width=323" alt="image.png"><br>在mysql命令行客户端中，sql语句没有分号是不会执行的：<br><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620444166592-310dfb98-9eed-43ed-afa5-b479e03e0a79.png#averageHue=%230d0d0c&height=249&id=W3RxL&originHeight=249&originWidth=210&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4063&status=done&style=shadow&title=&width=210" alt="image.png"><br>末尾加上“;”就执行了：<br><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620444251765-5d3f1b6c-a491-4382-92a8-8ebb31a40b45.png#averageHue=%230e0d0d&height=236&id=AdNxg&originHeight=236&originWidth=943&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16079&status=done&style=shadow&title=&width=943" alt="image.png"><br>以上sql虽然以分号结尾之后执行了，但是报错了，错误信息显示：语法错误。<br>假设一个SQL语句在书写过程中出错了，怎么终止这条SQL呢？\c<br><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620444994820-7b03fb95-5097-418c-bc6f-75e3613c7d17.png#averageHue=%2312100f&height=74&id=DCv3D&originHeight=74&originWidth=168&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2131&status=done&style=shadow&title=&width=168" alt="image.png"></p>
<h3 id="查询时字段可参与数学运算"><a href="#查询时字段可参与数学运算" class="headerlink" title="查询时字段可参与数学运算"></a>查询时字段可参与数学运算</h3><hr>
<p>在进行查询操作的时候，字段是可以参与数学运算的，例如加减乘除等。<br>案例1：查询每个员工的月薪</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, sal <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620453626714-46aed4db-e9fb-49be-a9be-ce9662dbc962.png#averageHue=%2312100f&height=364&id=wOnEt&originHeight=364&originWidth=375&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21162&status=done&style=shadow&title=&width=375" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=FCK1j&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="><br>案例2：查询每个员工的年薪（月薪 * 12）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, sal <span class="operator">*</span> <span class="number">12</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620453661204-ca783845-5f31-49fc-90d8-0f4426598cde.png#averageHue=%2313100f&height=364&id=Zkjv2&originHeight=364&originWidth=387&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22636&status=done&style=shadow&title=&width=387" alt="image.png"></p>
<h3 id="查询时字段可起别名"><a href="#查询时字段可起别名" class="headerlink" title="查询时字段可起别名"></a>查询时字段可起别名</h3><hr>
<p>我们借用一下之前的SQL语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, sal <span class="operator">*</span> <span class="number">12</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620453661204-ca783845-5f31-49fc-90d8-0f4426598cde.png#averageHue=%2313100f&height=364&id=EQnXg&originHeight=364&originWidth=387&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22636&status=done&style=shadow&title=&width=387" alt="image.png"><br>以上的查询结果列名“sal * 12”可读性较差，是否可以给查询结果的列名进行重命名呢？</p>
<h4 id="as关键字"><a href="#as关键字" class="headerlink" title="as关键字"></a>as关键字</h4><ul>
<li>使用as关键字</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, sal <span class="operator">*</span> <span class="number">12</span> <span class="keyword">as</span> yearsal <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620454420847-c739365b-440e-4cf7-b1e2-2bcf6d5cdb8b.png#averageHue=%2312100f&height=372&id=NImNH&originHeight=372&originWidth=473&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25001&status=done&style=shadow&title=&width=473" alt="image.png"><br>通过as关键字起别名后，查询结果列显示yearsal，可读性增强。</p>
<h4 id="省略as关键字"><a href="#省略as关键字" class="headerlink" title="省略as关键字"></a>省略as关键字</h4><ul>
<li>其实as关键字可以省略，只要使用空格即可</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, sal <span class="operator">*</span> <span class="number">12</span> yearsal <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620466356467-fb4612f8-72f6-4506-b2bc-1744846c171d.png#averageHue=%2311100e&height=363&id=XWTbX&originHeight=363&originWidth=464&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24234&status=done&style=shadow&title=&width=464" alt="image.png"></p>
<ul>
<li>通过以上测试，得知as可以省略，可以使用空格代替as，但如果别名中有空格呢？</li>
</ul>
<h4 id="别名中有空格"><a href="#别名中有空格" class="headerlink" title="别名中有空格"></a>别名中有空格</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, sal <span class="operator">*</span> <span class="number">12</span> <span class="keyword">year</span> sal <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620466540145-98adb10e-15a2-46df-9179-7e41ae1fc322.png#averageHue=%2313110f&height=87&id=LnbYI&originHeight=87&originWidth=946&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12503&status=done&style=shadow&title=&width=946" alt="image.png"><br>可以看出，执行报错了，说语法有问题，这是为什么？分析一下：SQL语句编译器在检查该语句的时候，在year后面遇到了空格，会继续找from关键字，但year后面不是from关键字，所以编译器报错了。怎么解决这个问题？记住：如果别名中有空格的话，可以将这个别名使用双引号或者单引号将其括起来。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, sal <span class="operator">*</span> <span class="number">12</span> &quot;year sal&quot; <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> ename, sal <span class="operator">*</span> <span class="number">12</span> <span class="string">&#x27;year sal&#x27;</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620467027246-b5cce57e-3ca3-4b3f-9298-a21fc3bb77c3.png#averageHue=%23110f0e&height=744&id=kyi8P&originHeight=744&originWidth=558&originalType=binary&ratio=1&rotation=0&showTitle=false&size=53259&status=done&style=shadow&title=&width=558" alt="image.png"><br><strong>在mysql中，字符串既可以使用双引号也可以使用单引号，但还是建议使用单引号，因为单引号属于标准SQL。</strong></p>
<h4 id="别名中有中文"><a href="#别名中有中文" class="headerlink" title="别名中有中文"></a>别名中有中文</h4><ul>
<li>如果别名采用中文呢？</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, sal <span class="operator">*</span> <span class="number">12</span> 年薪 <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1620467760618-b5df74f5-c8ee-4e39-88a9-e10fde59bb56.png#averageHue=%2311100e&height=373&id=AsiUs&originHeight=373&originWidth=445&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24025&status=done&style=shadow&title=&width=445" alt="image.png"><br><strong>别名是中文是可以的，但是对于低版本的mysql来说会报错，需要添加双引号或单引号。</strong>我们当前使用的mysql版本是：8.0.24</p>
<h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><hr>
<p>通常在进行查询操作的时候，都是查询符合某些条件的数据，很少将表中所有数据都取出来。怎么取出表的部分数据？需要在查询语句中添加条件进行数据的过滤。常见的过滤条件如下：</p>
<table>
<thead>
<tr>
<th><strong>条件</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>&#x3D;</td>
<td>等于</td>
</tr>
<tr>
<td>&lt;&gt;或!&#x3D;</td>
<td>不等于</td>
</tr>
<tr>
<td>&gt;&#x3D;</td>
<td>大于等于</td>
</tr>
<tr>
<td>&lt;&#x3D;</td>
<td>小于等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>between…and…</td>
<td>等同于 &gt;&#x3D; and &lt;&#x3D;</td>
</tr>
<tr>
<td>is null</td>
<td>为空</td>
</tr>
<tr>
<td>is not null</td>
<td>不为空</td>
</tr>
<tr>
<td>&lt;&#x3D;&gt;</td>
<td>安全等于（可读性差，很少使用了）。</td>
</tr>
<tr>
<td>and 或 &amp;&amp;</td>
<td>并且</td>
</tr>
<tr>
<td>or 或 &#124;&#124;</td>
<td>或者</td>
</tr>
<tr>
<td>in</td>
<td>在指定的值当中</td>
</tr>
<tr>
<td>not in</td>
<td>不在指定的值当中</td>
</tr>
<tr>
<td>exists</td>
<td></td>
</tr>
<tr>
<td>not exists</td>
<td></td>
</tr>
<tr>
<td>like</td>
<td>模糊查询</td>
</tr>
</tbody></table>
<h3 id="条件查询语法格式"><a href="#条件查询语法格式" class="headerlink" title="条件查询语法格式"></a>条件查询语法格式</h3><hr>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  过滤条件;</span><br></pre></td></tr></table></figure>

<p>过滤条件放在where子句当中，以上语句的执行顺序是：<br>    第一步：先执行from<br>    第二步：再通过where条件过滤<br>    第三步：最后执行select，查询并将结果展示到控制台</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=WjVQY&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="></p>
<h3 id="等于、不等于"><a href="#等于、不等于" class="headerlink" title="等于、不等于"></a>等于、不等于</h3><hr>
<h4 id="等于"><a href="#等于" class="headerlink" title="等于 &#x3D;"></a>等于 &#x3D;</h4><p>判断等量关系，支持多种数据类型，比如：数字、字符串、日期等。<br>案例1：查询月薪3000的员工编号及姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  empno,ename</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  sal <span class="operator">=</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621907694609-eea9c573-f409-4291-b065-afdbf568e8c7.png#averageHue=%2312100f&height=267&id=Y8ZCX&originHeight=267&originWidth=306&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10989&status=done&style=shadow&title=&width=306" alt="image.png"><br>案例2：查询员工FORD的岗位及月薪</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	job, sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	ename <span class="operator">=</span> <span class="string">&#x27;FORD&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621907754724-3f628fe9-0c56-4057-8be7-60d0bf968b6c.png#averageHue=%2312100f&height=254&id=KB48O&originHeight=254&originWidth=309&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9820&status=done&style=shadow&title=&width=309" alt="image.png"><br>存储在表emp中的员工姓名是FORD，全部大写，如果在查询的时候，写成全部小写会怎样呢？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	job, sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	ename <span class="operator">=</span> <span class="string">&#x27;ford&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621907908980-acfef2ac-247a-434a-846d-aebe132c534b.png#averageHue=%23131110&height=255&id=fOGhC&originHeight=255&originWidth=268&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9405&status=done&style=shadow&title=&width=268" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=vKAPe&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="><br>通过测试发现，即使写成小写ford，也是可以查询到结果的，<strong>不过这里需要注意的是：在Oracle数据库当中是查询不到数据的，Oracle的语法要比MySQL的语法严谨。对于SQL语句本身来说是不区分大小写的，但是对于表中真实存储的数据，大写A和小写a还是不一样的，这一点Oracle做的很好。MySQL的语法更随性。另外在Oracle当中，字符串是必须使用单引号括起来的，但在MySQL当中，字符串可以使用单引号，也可以使用双引号</strong>，如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	job, sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  ename <span class="operator">=</span> &quot;FORD&quot;;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621908335672-ce3770ed-b906-44ad-8e6a-1255e620f77c.png#averageHue=%23110f0e&height=152&id=nVwF9&originHeight=152&originWidth=550&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9330&status=done&style=shadow&title=&width=550" alt="image.png"><br>案例3：查询岗位是MANAGER的员工编号及姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  empno, ename</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621908485311-e63dfa85-7530-4d2e-8652-f5885287dda7.png#averageHue=%23100f0e&height=190&id=vTZba&originHeight=190&originWidth=588&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13081&status=done&style=shadow&title=&width=588" alt="image.png"></p>
<ul>
<li><input disabled="" type="checkbox"> 任务：查询工资级别是1的最低工资以及最高工资</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=LSu5h&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="></p>
<h4 id="不等于-或"><a href="#不等于-或" class="headerlink" title="不等于 &lt;&gt; 或 !&#x3D;"></a>不等于 &lt;&gt; 或 !&#x3D;</h4><p>判断非等量关系，支持字符串、数字、日期类型等。不等号有两种写法，第一种&lt;&gt;，第二种!&#x3D;，第二种写法和Java程序中的不等号相同，第一种写法比较诡异，不过也很好理解，比如&lt;&gt;3，表示小于3、大于3，就是不等于3。你get到了吗？<br>案例1：查询工资不是3000的员工编号、姓名、薪资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  empno,ename,sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  sal <span class="operator">&lt;&gt;</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621909279969-92f574b8-825b-4774-ab25-b5ccb058ebd5.png#averageHue=%2312100f&height=365&id=x0euZ&originHeight=365&originWidth=577&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31965&status=done&style=shadow&title=&width=577" alt="image.png"><br>案例2：查询工作岗位不是MANAGER的员工姓名和岗位</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  ename,job</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	job <span class="operator">&lt;&gt;</span> <span class="string">&#x27;MANAGER&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621909394164-d589f9f5-30a1-477c-aef6-b659ae36d9e8.png#averageHue=%2311100f&height=351&id=X5qgA&originHeight=351&originWidth=575&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26497&status=done&style=shadow&title=&width=575" alt="image.png"></p>
<ul>
<li><input disabled="" type="checkbox"> 任务：查询不在部门编号为10的部门工作的员工信息</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=rXXwQ&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="></p>
<h3 id="大于、大于等于、小于、小于等于"><a href="#大于、大于等于、小于、小于等于" class="headerlink" title="大于、大于等于、小于、小于等于"></a>大于、大于等于、小于、小于等于</h3><hr>
<h4 id="大于"><a href="#大于" class="headerlink" title="大于 &gt;"></a>大于 &gt;</h4><p>案例：找出薪资大于3000的员工姓名、薪资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ename, sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  sal <span class="operator">&gt;</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621909653019-47b3d57f-3690-46fb-9f47-7906f0fd3245.png#averageHue=%2311100f&height=148&id=k0f1J&originHeight=148&originWidth=514&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8657&status=done&style=shadow&title=&width=514" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=ydNP9&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="></p>
<h4 id="大于等于"><a href="#大于等于" class="headerlink" title="大于等于 &gt;&#x3D;"></a>大于等于 &gt;&#x3D;</h4><p>案例：找出薪资大于等于3000的员工姓名、薪资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ename, sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  sal <span class="operator">&gt;=</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621909723383-d1a6872b-5790-4d89-875b-e1116ea539cf.png#averageHue=%23110f0e&height=190&id=pnLPe&originHeight=190&originWidth=528&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11463&status=done&style=shadow&title=&width=528" alt="image.png"></p>
<h4 id="小于"><a href="#小于" class="headerlink" title="小于 &lt;"></a>小于 &lt;</h4><p>案例：找出薪资小于3000的员工姓名、薪资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ename, sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  sal <span class="operator">&lt;</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621909833614-f9d57a1f-1d48-4d14-aaef-83c5bddb89a8.png#averageHue=%23110f0e&height=346&id=Ln9DW&originHeight=346&originWidth=535&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24457&status=done&style=shadow&title=&width=535" alt="image.png"></p>
<h4 id="小于等于"><a href="#小于等于" class="headerlink" title="小于等于 &lt;&#x3D;"></a>小于等于 &lt;&#x3D;</h4><p>案例：找出薪资小于等于3000的员工姓名、薪资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ename, sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  sal <span class="operator">&lt;=</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621909895715-9af5ab2f-b445-4b44-a643-fd2a312cac2c.png#averageHue=%23110f0e&height=387&id=ZVSfe&originHeight=387&originWidth=536&originalType=binary&ratio=1&rotation=0&showTitle=false&size=27408&status=done&style=shadow&title=&width=536" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=VCbJ6&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="></p>
<h3 id="and"><a href="#and" class="headerlink" title="and"></a>and</h3><hr>
<p>and表示并且，还有另一种写法：&amp;&amp;<br>案例：找出薪资大于等于3000并且小于等于5000的员工姓名、薪资。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  ename,sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  sal <span class="operator">&gt;=</span> <span class="number">3000</span> <span class="keyword">and</span> sal <span class="operator">&lt;=</span> <span class="number">5000</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621910545661-438867ac-b8d0-4a80-929e-5a758b44add4.png#averageHue=%23100f0e&height=193&id=GpkEk&originHeight=193&originWidth=681&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12734&status=done&style=shadow&title=&width=681" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621910577682-f852440b-94f8-4299-89ad-c0a88fefc0d1.png#averageHue=%23100f0e&height=187&id=AyScE&originHeight=187&originWidth=672&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13060&status=done&style=shadow&title=&width=672" alt="image.png"></p>
<ul>
<li><input disabled="" type="checkbox"> 任务：找出工资级别为2~4（包含2和4）的最低工资和最高工资。</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=XfnXa&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="></p>
<h3 id="or"><a href="#or" class="headerlink" title="or"></a>or</h3><hr>
<p>or表示或者，还有另一种写法：||<br>案例：找出工作岗位是MANAGER和SALESMAN的员工姓名、工作岗位</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ename, job</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">or</span> job <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621910850853-c7030458-0c8f-4040-bc29-c6fa66caca7c.png#averageHue=%23110f0e&height=376&id=tQUI3&originHeight=376&originWidth=492&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22698&status=done&style=shadow&title=&width=492" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621910943353-4a9fb152-67b9-4044-a2b4-b90a2fbf3f57.png#averageHue=%23110f0e&height=370&id=k83WP&originHeight=370&originWidth=471&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22916&status=done&style=shadow&title=&width=471" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=yWWia&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="><br>注意：这个题目描述中有这样一句话：MANAGER和SALESMAN，有的同学一看到“和”，就直接使用“and”了，因为“和”对应的英文单词是“and”，如果是这样的话，就大错特错了，因为and表示并且，使用and表示工作岗位既是MANAGER又是SALESMAN的员工，这样的员工是不存在的，因为每一个员工只有一个岗位，不可能同时从事两个岗位。所以使用and是查询不到任何结果的。如下</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ename, job</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">and</span> job <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621911189669-be42f087-b388-4eb2-80b7-602766996b82.png#averageHue=%23100f0e&height=151&id=DRxAe&originHeight=151&originWidth=471&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8765&status=done&style=shadow&title=&width=471" alt="image.png"></p>
<ul>
<li><input disabled="" type="checkbox"> 任务：查询20和30部门的员工信息。</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=E82Cs&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="></p>
<h3 id="and和or的优先级问题"><a href="#and和or的优先级问题" class="headerlink" title="and和or的优先级问题"></a>and和or的优先级问题</h3><hr>
<p>and和or同时出现时，and优先级较高，会先执行，如果希望or先执行，这个时候需要给or条件添加小括号。另外，以后遇到不确定的优先级时，可以通过添加小括号的方式来解决。对于优先级问题没必要记忆。<br>案例：找出薪资小于1500，并且部门编号是20或30的员工姓名、薪资、部门编号。<br>先来看一下错误写法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  ename,sal,deptno</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  sal <span class="operator">&lt;</span> <span class="number">1500</span> <span class="keyword">and</span> deptno <span class="operator">=</span> <span class="number">20</span> <span class="keyword">or</span> deptno <span class="operator">=</span> <span class="number">30</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621912213872-f2b1fe9e-384c-404e-bf24-d81bd895ae23.png#averageHue=%2311100f&height=388&id=DymCc&originHeight=388&originWidth=524&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26693&status=done&style=shadow&title=&width=524" alt="image.png"><br>认真解读题意得知：薪资小于1500是一个大前提，要找出的是薪资小于1500的，满足这个条件的前提下，再找部门编号是20或30的，显然以上的运行结果中出现了薪资为1600的，为什么1600的会出现呢？这是因为“sal &lt; 1500 and deptno &#x3D; 20”结合在一起了，“depnto &#x3D; 30”成了一个独立的条件。会导致部门编号为30的所有员工全部查询出来。我们应该让“deptno &#x3D; 20 or deptno &#x3D; 30”结合在一起，正确写法如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  ename,sal,deptno</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  sal <span class="operator">&lt;</span> <span class="number">1500</span> <span class="keyword">and</span> (deptno <span class="operator">=</span> <span class="number">20</span> <span class="keyword">or</span> deptno <span class="operator">=</span> <span class="number">30</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621912713447-a9b7aeee-4998-4eae-8e53-71353a405890.png#averageHue=%2311100e&height=330&id=g19B4&originHeight=330&originWidth=539&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21912&status=done&style=shadow&title=&width=539" alt="image.png"></p>
<ul>
<li><input disabled="" type="checkbox"> 任务：找出薪资小于1500的，并且工作岗位是CLERK和SALESMAN的员工姓名、薪资、岗位。</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=L1XhP&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="></p>
<h3 id="between…and…"><a href="#between…and…" class="headerlink" title="between…and…"></a>between…and…</h3><hr>
<p>between…and…等同于 &gt;&#x3D; and &lt;&#x3D;<br>做区间判断的，包含左右两个边界值。<br>它支持数字、日期、字符串等数据类型。<br>between…and…在使用时一定是**左小右大**。左大右小时无法查询到数据。<br>between…and… 和 &gt;&#x3D; and &lt;&#x3D;只是在写法结构上有区别，执行原理和效率方面没有区别。<br>案例：找出薪资在1600到3000的员工姓名、薪资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ename,sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	sal <span class="keyword">between</span> <span class="number">1600</span> <span class="keyword">and</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621913942714-15a74832-d5da-4215-8991-35a3d48f7061.png#averageHue=%2312100f&height=344&id=GTVA6&originHeight=344&originWidth=374&originalType=binary&ratio=1&rotation=0&showTitle=false&size=17629&status=done&style=shadow&title=&width=374" alt="image.png"><br>采用左大右小的方式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ename,sal</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	sal <span class="keyword">between</span> <span class="number">3000</span> <span class="keyword">and</span> <span class="number">1600</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621914030809-2ebf83da-aba0-429d-970e-2f6906611f11.png#averageHue=%2311100f&height=147&id=OG0Ah&originHeight=147&originWidth=358&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7418&status=done&style=shadow&title=&width=358" alt="image.png"><br>没有查询到任何数据，所以在使用的时候一定要注意：<strong>左小右大</strong>。</p>
<ul>
<li><input disabled="" type="checkbox"> 任务：查询在1982-01-23到1987-04-19之间入职的员工</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621914250873-25bff9ba-b4e6-4145-a5f8-9036fba35627.png#averageHue=%23161312&height=169&id=IPUnM&originHeight=169&originWidth=783&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20676&status=done&style=shadow&title=&width=783" alt="image.png"><br>注意：以上SQL语句中日期需要加上单引号。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=JTZOF&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="></p>
<h3 id="is-null、is-not-null"><a href="#is-null、is-not-null" class="headerlink" title="is null、is not null"></a>is null、is not null</h3><hr>
<p>判断某个数据是否为null，不能使用等号，只能使用 is null<br>判断某个数据是否不为null，不能使用不等号，只能使用 is not null<br>在数据库中null不是一个值，不能用等号和不等号衡量，null代表什么也没有，没有数据，没有值</p>
<h4 id="is-null"><a href="#is-null" class="headerlink" title="is null"></a>is null</h4><p>案例1：找出津贴为空的员工姓名、薪资、津贴。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  ename,sal,comm</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  comm <span class="keyword">is</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621914737738-74345239-9ea8-4afa-a4bf-68fb0bb26e98.png#averageHue=%23161310&height=427&id=B8Ayw&originHeight=427&originWidth=298&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23224&status=done&style=shadow&title=&width=298" alt="image.png"><br>我们使用等号，尝试一下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  ename,sal,comm</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  comm <span class="operator">=</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621914817611-97c0858b-a248-4a10-9fba-e5152283b553.png#averageHue=%2312100f&height=149&id=p0pLx&originHeight=149&originWidth=247&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5999&status=done&style=shadow&title=&width=247" alt="image.png"><br>查询不到任何数据，所以判断是否为空，不能用等号。<br><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=Byo2n&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="></p>
<h4 id="is-not-null"><a href="#is-not-null" class="headerlink" title="is not null"></a>is not null</h4><p>案例2：找出津贴不为空的员工姓名、薪资、津贴</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  ename,sal,comm</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  comm <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621914906515-cfd5351e-22bc-4184-b6d5-785f27049020.png#averageHue=%23141210&height=311&id=hC9OP&originHeight=311&originWidth=315&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15140&status=done&style=shadow&title=&width=315" alt="image.png"></p>
<h3 id="in、not-in"><a href="#in、not-in" class="headerlink" title="in、not in"></a>in、not in</h3><hr>
<h4 id="in"><a href="#in" class="headerlink" title="in"></a>in</h4><p>job in(‘MANAGER’,’SALESMAN’,’CLERK’) 等同于 job &#x3D; ‘MANAGER’ or job &#x3D; ‘SALESMAN’ or job &#x3D; ‘CLERK’<br>sal in(1600, 3000, 5000) 等同于 sal &#x3D; 1600 or sal &#x3D; 3000 or sal &#x3D; 5000<br>in后面有一个小括号，小括号当中有多个值，值和值之间采用逗号隔开<br>sal in(1500, 5000)，需要注意的是：这个并不是说薪资在1500到5000之间，in不代表区间，表示sal是1500的和sal是5000的<br>案例1：找出工作岗位是MANAGER和SALESMAN的员工姓名、薪资、工作岗位<br>第一种：使用or</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  ename,sal,job</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">or</span> job <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621979207586-14dece4a-ce7f-4db8-a43f-bbfee6fd6133.png#averageHue=%2313110f&height=435&id=O2KwT&originHeight=435&originWidth=549&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35206&status=done&style=shadow&title=&width=549" alt="image.png"><br>第二种：使用in</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  ename,sal,job</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  job <span class="keyword">in</span>(<span class="string">&#x27;MANAGER&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621979288013-a6975d0e-46f9-43d8-a226-6df047e6490e.png#averageHue=%23141210&height=438&id=GI28U&originHeight=438&originWidth=470&originalType=binary&ratio=1&rotation=0&showTitle=false&size=33948&status=done&style=shadow&title=&width=470" alt="image.png"><br>案例2：找出薪资是1500&#x2F;1600&#x2F;3000的员工姓名、工作岗位</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  ename,job</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  sal <span class="keyword">in</span>(<span class="number">1500</span>, <span class="number">1600</span>, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621979430766-b7dc80d4-568a-4216-a173-6ec7c49d1f9c.png#averageHue=%2311100f&height=371&id=vsqSR&originHeight=371&originWidth=433&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20173&status=done&style=shadow&title=&width=433" alt="image.png"></p>
<h4 id="not-in"><a href="#not-in" class="headerlink" title="not in"></a>not in</h4><p>job not in(‘MANAGER’,’SALESMAN’) 等同于 job &lt;&gt; ‘MANAGER’ and job &lt;&gt; ‘SALESMAN’<br>sal not in(1600, 5000) 等同于 sal &lt;&gt; 1600 and sal &lt;&gt; 5000<br>案例：找出工作岗位不是MANAGER和SALESMAN的员工姓名、工作岗位<br>第一种：使用and</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ename,job</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  job <span class="operator">&lt;&gt;</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">and</span> job <span class="operator">&lt;&gt;</span> <span class="string">&#x27;SALESMAN&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621980958567-7c01fd48-a1ec-4392-85e1-120b86865b99.png#averageHue=%23100f0e&height=406&id=N24ds&originHeight=406&originWidth=599&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26784&status=done&style=shadow&title=&width=599" alt="image.png"><br>第二种：使用not in</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  ename,job</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">  job <span class="keyword">not</span> <span class="keyword">in</span>(<span class="string">&#x27;MANAGER&#x27;</span>, <span class="string">&#x27;SALESMAN&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621981036376-d6cecc7a-b7b8-4342-a83e-19ee49d77697.png#averageHue=%23110f0e&height=436&id=udgWf&originHeight=436&originWidth=537&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28126&status=done&style=shadow&title=&width=537" alt="image.png"></p>
<h4 id="in、not-in-与-NULL"><a href="#in、not-in-与-NULL" class="headerlink" title="in、not in 与 NULL"></a>in、not in 与 NULL</h4><p>先来看一下emp表中的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621981605595-632500b0-a2a0-401c-8995-1573468ae1f1.png#averageHue=%23161311&height=492&id=mVQz1&originHeight=492&originWidth=968&originalType=binary&ratio=1&rotation=0&showTitle=false&size=85972&status=done&style=shadow&title=&width=968" alt="image.png"><br>通过表中数据观察到，有4个员工的津贴不为NULL，剩下10个员工的津贴都是NULL。<br>写这样一条SQL语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">in</span>(<span class="keyword">NULL</span>, <span class="number">300</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621981810022-80718321-ffdd-496b-af1d-620cf268c993.png#averageHue=%23141211&height=172&id=xG35u&originHeight=172&originWidth=922&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19587&status=done&style=shadow&title=&width=922" alt="image.png"><br>为什么以上执行结果只有一条记录呢？分析一下：<br>首先你要知道in的执行原理实际上是采用&#x3D;和or的方式，也就是说，以上SQL语句实际上是：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="operator">=</span> <span class="keyword">NULL</span> <span class="keyword">or</span> comm <span class="operator">=</span> <span class="number">300</span>;</span><br></pre></td></tr></table></figure>

<p>其中NULL不能用等号&#x3D;进行判断，所以comm &#x3D; NULL结果是false，然而中间使用的是or，所以comm &#x3D; NULL被忽略了。所以查询结果就以上一条数据。<br>通过以上的测试得知：<strong>in是自动忽略NULL的</strong>。<br>再写这样一条SQL语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">not</span> <span class="keyword">in</span>(<span class="keyword">NULL</span>, <span class="number">300</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1621982073198-d77677ed-77de-4086-aba9-4eaeda923a51.png#averageHue=%23141210&height=56&id=TPlkq&originHeight=56&originWidth=656&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6518&status=done&style=shadow&title=&width=656" alt="image.png"><br>以上的执行结果奇怪了，为什么没有查到任何数据呢？我们分析一下：<br>首先你要知道not in的执行原理实际上是采用&lt;&gt;和and的方式，也就是说，以上SQL语句实际上是：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="operator">&lt;&gt;</span> <span class="keyword">NULL</span> <span class="keyword">and</span> comm <span class="operator">&lt;&gt;</span> <span class="number">300</span>;</span><br></pre></td></tr></table></figure>

<p>其中NULL的判断不能使用&lt;&gt;，所以comm &lt;&gt; NULL结果是false，由于后面是and，and表示并且，comm &lt;&gt; NULL已经是false了，所以and右边的就没必要运算了，comm &lt;&gt; NULL and comm &lt;&gt; 300的整体运算结果就是false。所以查询不到任何数据。<br>通过以上测试得知，<strong>not in是不会自动忽略NULL的</strong>，所以在使用not in的时候一定要提前过滤掉NULL。</p>
<h4 id="in和or的效率问题"><a href="#in和or的效率问题" class="headerlink" title="in和or的效率问题"></a>in和or的效率问题</h4><p>or的效率为O(n)，而in的效率为O(log n), 当n越大的时候效率相差越明显（<strong>也就是说数据量越大的时候，in的效率越高</strong>）</p>
<h3 id="模糊查询like"><a href="#模糊查询like" class="headerlink" title="模糊查询like"></a>模糊查询like</h3><hr>
<p>模糊查询又被称为模糊匹配，在实际开发中使用较多，比如：查询公司中所有姓张的，查询岗位中带有经理两个字的职位等等，这些都需要使用模糊查询。<br>模糊查询的语法格式如下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> .. <span class="keyword">from</span> .. <span class="keyword">where</span> 字段 <span class="keyword">like</span> <span class="string">&#x27;通配符表达式&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>在模糊查询中，通配符主要包括两个：一个是%，一个是下划线_。其中%代表任意多个字符。下划线_代表任意一个字符。<br>案例1：查询员工名字以’S’开始的员工姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;S%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1622000884924-f3303ff0-cb9a-4393-831c-01d3e705606d.png#averageHue=%230f0e0d&height=201&id=nTI0r&originHeight=201&originWidth=636&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11624&status=done&style=shadow&title=&width=636" alt="image.png"><br>案例2：查询员工名字以’T’结尾的员工姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;%T&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1622000970235-0265da36-1e10-4da5-abb8-c651452fad21.png#averageHue=%230f0e0d&height=188&id=skACT&originHeight=188&originWidth=624&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10432&status=done&style=shadow&title=&width=624" alt="image.png"><br>案例3：查询员工名字中含有’O’的员工姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;%O%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1622001027995-71da44df-e3b1-4e56-a6e2-922a50ccc2b7.png#averageHue=%230f0e0e&height=231&id=Aa56U&originHeight=231&originWidth=632&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13088&status=done&style=shadow&title=&width=632" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&from=url&id=Kl5BB&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=shadow&title="><br>案例4：查询员工名字中第二个字母是’A’的员工姓名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;_A%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1622001108864-1abbac56-669f-4c35-9b48-6d80452ad8ce.png#averageHue=%230f0e0d&height=226&id=ICQ6h&originHeight=226&originWidth=636&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13307&status=done&style=shadow&title=&width=636" alt="image.png"><br>案例5：查询学员名字中含有下划线的。<br>执行以下SQL语句，先准备测试数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> student;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">  id <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name) <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">&#x27;susan&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name) <span class="keyword">values</span>(<span class="number">2</span>, <span class="string">&#x27;lucy&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student(id,name) <span class="keyword">values</span>(<span class="number">3</span>, <span class="string">&#x27;jack_son&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2021/png/21376908/1622001536746-e0d05c73-f941-4f28-9190-bbfcf248c41b.png#averageHue=%2311100f&height=222&id=ttwgx&originHeight=222&originWidth=371&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10496&status=done&style=shadow&title=&width=371" alt="image.png"><br>查询学员名字中含有下划线的，执行以下SQL试试：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%_%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1667523151909-c112a3cb-9968-4b4a-8bee-5a75c4b6a9f2.png#averageHue=%230f0e0e&clientId=ud0c47669-2d83-4&from=paste&height=232&id=u08a9aa32&originHeight=232&originWidth=664&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12182&status=done&style=shadow&taskId=u2055ec95-4933-45ca-b17f-c384a54205d&title=&width=664" alt="image.png"><br>显然这个查询结果不是我们想要的，以上SQL之所以将所有数据全部显示了，因为下划线代表任意单个字符，如果你想让这个下划线变成一个普通的下划线字符，就要使用转义字符了，在mysql当中转义字符是“\”，这个和java语言中的转义字符是一样的：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;%\_%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1667523291579-62dc328f-17ef-4e97-a22a-374ade19e797.png#averageHue=%23100f0e&clientId=ud0c47669-2d83-4&from=paste&height=139&id=u14f2fd6c&originHeight=139&originWidth=635&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7682&status=done&style=shadow&taskId=u5f6488c4-25a2-4517-8936-801669b340e&title=&width=635" alt="image.png"></p>
<h2 id="排序操作"><a href="#排序操作" class="headerlink" title="排序操作"></a>排序操作</h2><hr>
<p>排序操作很常用，比如查询学员成绩，按照成绩降序排列。排序的SQL语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> .. <span class="keyword">from</span> .. <span class="keyword">order</span> <span class="keyword">by</span> 字段 <span class="keyword">asc</span><span class="operator">/</span><span class="keyword">desc</span></span><br></pre></td></tr></table></figure>

<h3 id="单一字段升序"><a href="#单一字段升序" class="headerlink" title="单一字段升序"></a>单一字段升序</h3><p>查询员工的编号、姓名、薪资，按照薪资升序排列。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> empno,ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1667524015631-e1f1b6c3-0a5b-4f04-91d1-7a11df8fc7ff.png#averageHue=%2312100f&clientId=ud0c47669-2d83-4&from=paste&height=490&id=u337ff7e2&originHeight=490&originWidth=697&originalType=binary&ratio=1&rotation=0&showTitle=false&size=40038&status=done&style=shadow&taskId=uc89e7030-c586-4582-bdaa-6b231e3ab16&title=&width=697" alt="image.png"></p>
<h3 id="单一字段降序"><a href="#单一字段降序" class="headerlink" title="单一字段降序"></a>单一字段降序</h3><p>查询员工的编号、姓名、薪资，按照薪资降序排列。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> empno,ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1667524068322-84c1f716-5b7a-4b72-8a41-c0f8ec433d57.png#averageHue=%2311100f&clientId=ud0c47669-2d83-4&from=paste&height=490&id=ub06f2a23&originHeight=490&originWidth=737&originalType=binary&ratio=1&rotation=0&showTitle=false&size=40326&status=done&style=shadow&taskId=ube0d34dc-9629-4733-ac61-e9df253d566&title=&width=737" alt="image.png"></p>
<h3 id="默认采用升序"><a href="#默认采用升序" class="headerlink" title="默认采用升序"></a>默认采用升序</h3><p>查询员工的编号、姓名、薪资，按照薪资升序排列。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> empno,ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1667524117390-bd4560ff-accf-45ee-97f1-d098f86fd31f.png#averageHue=%2312100f&clientId=ud0c47669-2d83-4&from=paste&height=486&id=u288be0fb&originHeight=486&originWidth=664&originalType=binary&ratio=1&rotation=0&showTitle=false&size=39701&status=done&style=shadow&taskId=ucd8a5bf0-4f87-444a-a13b-dcbb808b75f&title=&width=664" alt="image.png"><br>查询员工的编号、姓名，按照姓名升序排列。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> empno,ename <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> ename;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1667524169552-6abc923e-3638-4a65-ab97-741c22f885fa.png#averageHue=%23110f0e&clientId=ud0c47669-2d83-4&from=paste&height=488&id=ubf5dc2c5&originHeight=488&originWidth=626&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32304&status=done&style=shadow&taskId=uf1ac3bd4-f65a-4d1a-ac9e-a6d5d5b7e8e&title=&width=626" alt="image.png"></p>
<h3 id="多个字段排序"><a href="#多个字段排序" class="headerlink" title="多个字段排序"></a>多个字段排序</h3><p>查询员工的编号、姓名、薪资，按照薪资升序排列，如果薪资相同的，再按照姓名升序排列。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> empno,ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">asc</span>, ename <span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1667524337952-bbef44e7-488e-4c3e-9317-1fda80054c92.png#averageHue=%23110f0e&clientId=ud0c47669-2d83-4&from=paste&height=490&id=ud4173d66&originHeight=490&originWidth=813&originalType=binary&ratio=1&rotation=0&showTitle=false&size=40815&status=done&style=shadow&taskId=u231edd4c-d353-41e1-ba19-ebcc71d1d7b&title=&width=813" alt="image.png"></p>
<h3 id="where和order-by的位置"><a href="#where和order-by的位置" class="headerlink" title="where和order by的位置"></a>where和order by的位置</h3><p>找出岗位是MANAGER的员工姓名和薪资，按照薪资升序排列。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1667524386864-8d24513b-85f9-4f31-9462-4fe094cb0843.png#averageHue=%230f0e0e&clientId=ud0c47669-2d83-4&from=paste&height=233&id=ub579bda3&originHeight=233&originWidth=887&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16318&status=done&style=shadow&taskId=u0fd108a3-5c49-4ec2-843b-b8e4f5861c3&title=&width=887" alt="image.png"><br><strong>通过这个例子主要是想告诉大家：where先执行，order by语句是最后执行的。</strong></p>
<h2 id="distinct去重"><a href="#distinct去重" class="headerlink" title="distinct去重"></a>distinct去重</h2><p>查询工作岗位</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> job <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668570471000-b0d2c628-c149-4b13-b44c-ae6f5edefcf6.png#averageHue=%23110f0e&clientId=u005f32df-cdfa-4&from=paste&height=570&id=u3464010b&originHeight=570&originWidth=461&originalType=binary&ratio=1&rotation=0&showTitle=false&size=27010&status=done&style=shadow&taskId=ud01ef31e-b7e3-444e-a422-927baef293a&title=&width=461" alt="image.png"><br>可以看到工作岗位中有重复的记录，如何在显示的时候去除重复记录呢？在字段前添加distinct关键字。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> job <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668570545279-ba8dcff3-533d-4ca8-9cc9-4b544ae47e8c.png#averageHue=%23100f0e&clientId=u005f32df-cdfa-4&from=paste&height=316&id=u847f8b1c&originHeight=316&originWidth=512&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15359&status=done&style=shadow&taskId=uad426308-7527-406f-ac5a-83b5f426f2c&title=&width=512" alt="image.png"><br>注意：这个去重只是将显示的结果去重，原表数据不会被更改。<br>接下来测试一下，在distinct关键字前添加其它字段是否可以？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, <span class="keyword">distinct</span> job <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>分析一下：ename是14条记录，distinct job是5条记录，可以同时显示吗？<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668570696423-05844698-00b1-4e9e-aa98-1a53f465cff4.png#averageHue=%23151311&clientId=u005f32df-cdfa-4&from=paste&height=104&id=uc30b7a53&originHeight=104&originWidth=945&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15129&status=done&style=shadow&taskId=u877fbe24-2e82-46b5-85a4-fabccbe2c07&title=&width=945" alt="image.png"><br>报错了，通过测试得知，distinct<strong>只能出现在所有字段的最前面</strong>。</p>
<p><strong>当distinct出现后，后面多个字段一定是联合去重的（多个字段如果都相同就只出现一次)</strong></p>
<p>练习1：找出公司中所有的工作岗位。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668570864793-732f34aa-5b7d-4389-b4af-51cbd964215f.png#averageHue=%23100f0e&clientId=u005f32df-cdfa-4&from=paste&height=316&id=ub89f2b22&originHeight=316&originWidth=540&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15489&status=done&style=shadow&taskId=u5dab6bed-8c9b-4ae8-b617-37c86a9d8f2&title=&width=540" alt="image.png"></p>
<p>练习2：找出公司中不同部门的不同工作岗位。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668570891921-9c547b9b-d20e-4695-9704-051863b5e868.png#averageHue=%23110f0e&clientId=u005f32df-cdfa-4&from=paste&height=429&id=u755429fe&originHeight=429&originWidth=634&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26800&status=done&style=shadow&taskId=ub3689df0-e1a9-40c1-a4e6-1f2f509c001&title=&width=634" alt="image.png"></p>
<h2 id="数据处理函数"><a href="#数据处理函数" class="headerlink" title="数据处理函数"></a>数据处理函数</h2><hr>
<p>关于select语句，我们之前都是这样写：select 字段名 from 表名; 其实，这里的字段名可以看做“变量”，select后面既然可以跟变量，那么可以跟常量吗，尝试一下：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668568118423-c5b5d189-4d32-41ab-a189-3f155d0d0efa.png#averageHue=%230e0d0d&clientId=u005f32df-cdfa-4&from=paste&height=502&id=uf4590195&originHeight=502&originWidth=866&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24621&status=done&style=shadow&taskId=u9bf03714-2a03-4e7b-98d7-9996316a176&title=&width=866" alt="image.png"><br>通过以上sql的测试得知，select后面既可以跟变量，又可以跟常量。<br>以上三条SQL中前两条中100和’abc’都是常量，最后一条SQL的abc没有添加单引号，它会被当做某个表的字段名，因为没有这个字段所以报错。 </p>
<h3 id="字符串相关"><a href="#字符串相关" class="headerlink" title="字符串相关"></a>字符串相关</h3><h4 id="转大写upper和ucase"><a href="#转大写upper和ucase" class="headerlink" title="转大写upper和ucase"></a>转大写upper和ucase</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询所有员工名字，以大写形式展现</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">upper</span>(ename) <span class="keyword">as</span> ename <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668565912887-88d14d6c-707b-4e50-ac47-f8ad61b40d14.png#averageHue=%230e0e0d&clientId=u005f32df-cdfa-4&from=paste&height=531&id=ud706ac81&originHeight=531&originWidth=711&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22988&status=done&style=shadow&taskId=ua5341942-dd96-4402-8f3e-05136a93880&title=&width=711" alt="image.png"><br>还有一个和upper函数功能相同的函数ucase，也可以转大写，了解一下即可：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询所有员工姓名，以大写形式展现</span><br><span class="line"><span class="keyword">select</span> ucase(ename) <span class="keyword">as</span> ename <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668566229563-55802f88-f6d6-436a-b478-18832d7a0342.png#averageHue=%230f0e0d&clientId=u005f32df-cdfa-4&from=paste&height=534&id=uff6a6590&originHeight=534&originWidth=674&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23082&status=done&style=shadow&taskId=uface697c-6972-498a-86af-50b161e48cd&title=&width=674" alt="image.png"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询员工smith的岗位、薪资（假如你不知道数据库表中的人名是大写、小写还是大小写混合）</span><br><span class="line"><span class="keyword">select</span> ename, job, sal <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="built_in">upper</span>(ename) <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668566360054-6e77882a-21fc-4b6e-9a04-3e0098606db8.png#averageHue=%23100f0e&clientId=u005f32df-cdfa-4&from=paste&height=178&id=uf8993c00&originHeight=178&originWidth=982&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11947&status=done&style=shadow&taskId=u72025ccb-5725-4313-bf7b-3edebed799a&title=&width=982" alt="image.png"></p>
<h4 id="转小写lower和lcase"><a href="#转小写lower和lcase" class="headerlink" title="转小写lower和lcase"></a>转小写lower和lcase</h4><p><strong>很简单，不再赘述，直接上代码：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 查询员工姓名，以小写形式展现</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">lower</span>(ename) <span class="keyword">as</span> ename <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> lcase(ename) <span class="keyword">as</span> ename <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668566699289-0a479f71-ecf4-4a3f-ac4c-8516a4f0fee8.png#averageHue=%230f0e0d&clientId=u005f32df-cdfa-4&from=paste&height=216&id=u0f889bef&originHeight=216&originWidth=646&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9493&status=done&style=shadow&taskId=u5f16833e-e425-424b-a769-1761dd7023f&title=&width=646" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668566716526-c8fac5f9-7079-4738-a3d1-2a5c3c5e1145.png#averageHue=%230f0e0d&clientId=u005f32df-cdfa-4&from=paste&height=189&id=ue19b9b87&originHeight=189&originWidth=643&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8007&status=done&style=shadow&taskId=u7fc1e3dd-17d7-4f33-b8ed-b88901fb087&title=&width=643" alt="image.png"></p>
<h4 id="截取字符串substr"><a href="#截取字符串substr" class="headerlink" title="截取字符串substr"></a>截取字符串substr</h4><p>语法：substr(‘被截取的字符串’, 起始下标, 截取长度)<br>有两种写法：<br>第一种：substr(‘被截取的字符串’, 起始下标, 截取长度)<br>第二种：substr(‘被截取的字符串’, 起始下标)，当第三个参数“截取长度”缺失时，截取到字符串末尾<br>注意：起始下标从1开始，不是从0开始。（1表示从左侧开始的第一个位置，-1表示从右侧开始的第一个位置。）<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668567142258-6748508c-c3bb-440f-8ad7-c64df6c0028d.png#averageHue=%23100f0e&clientId=u005f32df-cdfa-4&from=paste&height=648&id=u521d5ef0&originHeight=648&originWidth=664&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35242&status=done&style=shadow&taskId=u50bb124d-9e6b-4c8a-b48c-76594e0ec3c&title=&width=664" alt="image.png"></p>
<p>练习：找出员工名字中第二个字母是A的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> substr(ename, <span class="number">2</span>, <span class="number">1</span>) <span class="operator">=</span> <span class="string">&#x27;A&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668567271612-710d3592-6111-4ab5-97c1-12f809ac7645.png#averageHue=%230f0e0d&clientId=u005f32df-cdfa-4&from=paste&height=254&id=u2313b4ee&originHeight=254&originWidth=854&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14523&status=done&style=shadow&taskId=u8ae9b244-f6d3-441c-89d0-4466eaa73e4&title=&width=854" alt="image.png"></p>
<h4 id="获取字符串长度length"><a href="#获取字符串长度length" class="headerlink" title="获取字符串长度length"></a>获取字符串长度length</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672736218451-70fddda1-2541-4c91-9f39-3f968a6b6e12.png#averageHue=%23100f0f&clientId=uc0e8c595-6b95-4&from=paste&height=167&id=u69789788&originHeight=167&originWidth=525&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7442&status=done&style=shadow&taskId=u39c20cea-67f3-49eb-9d8e-8c548360b72&title=&width=525" alt="image.png"><br>注意：一个汉字是2个长度。</p>
<h4 id="获取字符的个数char-length"><a href="#获取字符的个数char-length" class="headerlink" title="获取字符的个数char_length"></a>获取字符的个数char_length</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672736125194-177317bd-f65c-4c05-bda7-f58961b78fd7.png#averageHue=%2311100f&clientId=uc0e8c595-6b95-4&from=paste&height=168&id=uKcvT&originHeight=168&originWidth=582&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8283&status=done&style=shadow&taskId=u2abebb18-4522-415a-bf80-859153252d1&title=&width=582" alt="image.png"></p>
<h4 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h4><p>语法：concat(‘字符串1’, ‘字符串2’, ‘字符串3’….)<br>拼接的字符串数量没有限制。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668569810019-a8c939c4-518d-4ed9-961a-27d4440d13d0.png#averageHue=%2311100f&clientId=u005f32df-cdfa-4&from=paste&height=437&id=u00e5d696&originHeight=437&originWidth=860&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29849&status=done&style=shadow&taskId=ufbffbf88-a2ed-4341-a706-959748e2260&title=&width=860" alt="image.png"><br>注意：在mysql8之前，双竖线||也是可以完成字符串拼接的。但在mysql8之后，||只作为逻辑运算符，不能再进行字符串拼接了。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="string">&#x27;abc&#x27;</span> <span class="operator">||</span> <span class="string">&#x27;def&#x27;</span> <span class="operator">||</span> <span class="string">&#x27;xyz&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>mysql8之后，|| 只作为“或者”运算符，例如：找出工资高于3000或者低于900的员工姓名和薪资：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="number">3000</span> <span class="operator">||</span> sal <span class="operator">&lt;</span> <span class="number">900</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1669780282134-d3a16d8a-e0fc-4744-beff-83b3579f6161.png#averageHue=%230f0f0e&clientId=u6210fc1e-5e54-4&from=paste&height=196&id=uc7e77230&originHeight=196&originWidth=950&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11249&status=done&style=shadow&taskId=u19693054-9222-4df2-899e-3ed69a01a71&title=&width=950" alt="image.png"><br>mysql中可以使用+进行字符串的拼接吗？不可以，在mysql中+只作加法运算，在进行加法运算时，会将加号两边的数据尽最大的努力转换成数字再求和，如果无法转换成数字，最终运算结果通通是0</p>
<h4 id="去除字符串前后空白trim"><a href="#去除字符串前后空白trim" class="headerlink" title="去除字符串前后空白trim"></a>去除字符串前后空白trim</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> concat(<span class="built_in">trim</span>(<span class="string">&#x27;    abc    &#x27;</span>), <span class="string">&#x27;def&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668570023583-bcf0b431-c34c-486b-9ee0-e571ff3c158d.png#averageHue=%2310100f&clientId=u005f32df-cdfa-4&from=paste&height=204&id=u800e8929&originHeight=204&originWidth=715&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12536&status=done&style=shadow&taskId=uc6e946c5-bd11-4f08-83a5-34b7d5e1a78&title=&width=715" alt="image.png"><br>默认是去除前后空白，也可以去除指定的前缀后缀，例如：<br>去除前置0</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">trim</span>(<span class="keyword">leading</span> <span class="string">&#x27;0&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;000111000&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668570194415-8f78ced1-8f36-42d3-a829-b81fc4132c85.png#averageHue=%23121110&clientId=u005f32df-cdfa-4&from=paste&height=214&id=u54da0ae5&originHeight=214&originWidth=706&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12307&status=done&style=shadow&taskId=u4bd5c984-5076-4b41-936e-2cb2934e2a0&title=&width=706" alt="image.png"><br>去除后置0</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">trim</span>(<span class="keyword">trailing</span> <span class="string">&#x27;0&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;000111000&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668570218215-c862c7d8-1ee3-4066-8e25-055767efee61.png#averageHue=%2312100f&clientId=u005f32df-cdfa-4&from=paste&height=207&id=ud1b70c2d&originHeight=207&originWidth=704&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11888&status=done&style=shadow&taskId=u3680db7d-b909-4cfe-8636-aef9213b9cb&title=&width=704" alt="image.png"><br>前置0和后置0全部去除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">trim</span>(<span class="keyword">both</span> <span class="string">&#x27;0&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;000111000&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1668570238062-dff388d3-3106-457d-a9ae-819f41821792.png#averageHue=%2311100f&clientId=u005f32df-cdfa-4&from=paste&height=203&id=uca889e8f&originHeight=203&originWidth=678&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10559&status=done&style=shadow&taskId=u39829e4b-560a-42a1-b27c-315e566e9ae&title=&width=678" alt="image.png"></p>
<h3 id="数字相关"><a href="#数字相关" class="headerlink" title="数字相关"></a>数字相关</h3><h4 id="rand-和rand-x"><a href="#rand-和rand-x" class="headerlink" title="rand()和rand(x)"></a>rand()和rand(x)</h4><p>rand()生成0到1的随机浮点数。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1669797997130-63b2c8d0-6169-4ee8-9b6b-c3087e9d733b.png#averageHue=%2311100f&clientId=u57006619-2538-4&from=paste&height=432&id=uc1af8ae1&originHeight=432&originWidth=488&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21196&status=done&style=shadow&taskId=uf2b4c16d-fc16-42a5-91c6-c840e24096b&title=&width=488" alt="image.png"><br>rand(x)生成0到1的随机浮点数，通过指定整数x来确定每次获取到相同的浮点值。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1669798044104-7fc0b727-ff91-4d3e-be33-9954d556afe2.png#averageHue=%23121110&clientId=u57006619-2538-4&from=paste&height=431&id=uddf41de3&originHeight=431&originWidth=404&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23014&status=done&style=shadow&taskId=uc8b8c1f9-b44d-4886-8442-9c6d0e0beb7&title=&width=404" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1669798069147-75492782-759d-46d9-84c5-a83b3a63594c.png#averageHue=%23121110&clientId=u57006619-2538-4&from=paste&height=431&id=ud22d346e&originHeight=431&originWidth=417&originalType=binary&ratio=1&rotation=0&showTitle=false&size=21817&status=done&style=shadow&taskId=u01cf1b31-7d8b-4bc0-8eba-573138f7c49&title=&width=417" alt="image.png"></p>
<h4 id="round-x-和round-x-y-四舍五入"><a href="#round-x-和round-x-y-四舍五入" class="headerlink" title="round(x)和round(x,y)四舍五入"></a>round(x)和round(x,y)四舍五入</h4><p>round(x) 四舍五入，保留整数位，舍去所有小数<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1669798450055-e26955bd-ea2d-445a-be98-721b54d3ca35.png#averageHue=%2311100f&clientId=u57006619-2538-4&from=paste&height=427&id=u633ac709&originHeight=427&originWidth=438&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19800&status=done&style=shadow&taskId=u5ae99c90-04bd-47b9-9338-3be2146f355&title=&width=438" alt="image.png"><br>round(x,y) 四舍五入，保留y位小数<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1669798534269-9c494800-7878-4ccf-bacc-a8c4cdafbbe6.png#averageHue=%23100f0e&clientId=u57006619-2538-4&from=paste&height=656&id=ub44adc1f&originHeight=656&originWidth=467&originalType=binary&ratio=1&rotation=0&showTitle=false&size=30665&status=done&style=shadow&taskId=u06d2a339-d070-4c04-9d62-a6ca361ad3c&title=&width=467" alt="image.png"></p>
<h4 id="truncate-x-y-舍去"><a href="#truncate-x-y-舍去" class="headerlink" title="truncate(x, y)舍去"></a>truncate(x, y)舍去</h4><p>y是保留几位小数</p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1669798594158-7e51e7a5-27af-4f7f-8021-a751f425a316.png#averageHue=%2311100f&clientId=u57006619-2538-4&from=paste&height=220&id=u7586a0cc&originHeight=220&originWidth=492&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10521&status=done&style=shadow&taskId=u4aea8b0c-2612-4b7c-af22-e5b68687b80&title=&width=492" alt="image.png"><br>以上SQL表示保留两位小数，剩下的全部舍去。</p>
<h4 id="ceil与floor"><a href="#ceil与floor" class="headerlink" title="ceil与floor"></a>ceil与floor</h4><p>数字处理函数除了以上的之外，还有ceil和floor函数：</p>
<ul>
<li>ceil函数：返回大于或等于数值x的最小整数</li>
<li>floor函数：返回小于或等于数值x的最大整数</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672735932932-f0dfc7de-1f77-4eb0-b6e9-b6c6c2ce7ae3.png#averageHue=%23100f0e&clientId=uc0e8c595-6b95-4&from=paste&height=433&id=ua803b791&originHeight=433&originWidth=402&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13778&status=done&style=shadow&taskId=uf4127f6b-bfd8-454a-8aa8-2e1fec9edab&title=&width=402" alt="image.png"></p>
<h3 id="空处理"><a href="#空处理" class="headerlink" title="空处理"></a>空处理</h3><p>ifnull(x, y)，空处理函数，当x为NULL时，将x当做y处理。<br>ifnull(comm, 0)，表示如果员工的津贴是NULL时当做0处理。<br>在SQL语句中，凡是有NULL参与的数学运算，最终的计算结果都是NULL：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1669798864111-5cffd59f-d15c-4f6c-a2d8-0b623ec1f16c.png#averageHue=%23100f0e&clientId=u57006619-2538-4&from=paste&height=658&id=ue1cf6783&originHeight=658&originWidth=408&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23225&status=done&style=shadow&taskId=ua42e9e3c-fa93-4f6c-979d-d5444c21108&title=&width=408" alt="image.png"><br>看这样一个需求：查询每个员工的年薪。（年薪 &#x3D; (月薪 + 津贴) * 12个月。注意：有的员工津贴comm是NULL。）<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1669798945415-90bccaa6-1dda-4ebd-bc50-63ab5ba2b89a.png#averageHue=%23100f0e&clientId=u57006619-2538-4&from=paste&height=573&id=u514525d4&originHeight=573&originWidth=850&originalType=binary&ratio=1&rotation=0&showTitle=false&size=36066&status=done&style=shadow&taskId=ubb59ae71-c22d-456f-85bf-df0182998af&title=&width=850" alt="image.png"></p>
<p>以上查询结果中显示SMITH等人的年薪是NULL，这是为什么，这是因为SMITH等人的津贴comm是NULL，有NULL参与的数学运算，最终结果都是NULL，显然这个需要空处理，此时就用到了ifnull函数：<br><img src="https://cdn.nlark.com/yuque/0/2022/png/21376908/1669799067232-4896fa47-5c64-409a-b970-dddc31e06050.png#averageHue=%23100f0e&clientId=u57006619-2538-4&from=paste&height=573&id=u59b02703&originHeight=573&originWidth=982&originalType=binary&ratio=1&rotation=0&showTitle=false&size=42887&status=done&style=shadow&taskId=u063b2776-3482-4b4f-888c-3623426b77b&title=&width=982" alt="image.png"></p>
<h3 id="日期和时间相关函数"><a href="#日期和时间相关函数" class="headerlink" title="日期和时间相关函数"></a>日期和时间相关函数</h3><h4 id="获取当前日期和时间"><a href="#获取当前日期和时间" class="headerlink" title="获取当前日期和时间"></a>获取当前日期和时间</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672707310711-3115e4af-385c-4565-89c7-25bad76e8a6a.png#averageHue=%23121110&clientId=uc0e8c595-6b95-4&from=paste&height=162&id=uc379723b&originHeight=162&originWidth=404&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7211&status=done&style=shadow&taskId=uedf1c447-2a71-4f9a-9f96-98b9f249622&title=&width=404" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672707382021-d8d296b7-9d9a-4072-b714-c99da604ac12.png#averageHue=%23151312&clientId=uc0e8c595-6b95-4&from=paste&height=163&id=ua9b22a07&originHeight=163&originWidth=377&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8104&status=done&style=shadow&taskId=u0aa13932-ae31-46ba-94b7-f5cee861153&title=&width=377" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672707469394-4fe3f0fb-ca9e-4484-b939-db716f6ddd38.png#averageHue=%23131211&clientId=uc0e8c595-6b95-4&from=paste&height=168&id=ue97dcb2c&originHeight=168&originWidth=801&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12054&status=done&style=shadow&taskId=uf047d345-596d-4f3c-a996-3d1f6850219&title=&width=801" alt="image.png"></p>
<p><img src="https://pic.ericzht.space/PicGo/image-20250528163048586.png" alt="image-20250528163048586">now()和sysdate()的区别：</p>
<ul>
<li>now()：获取的是执行select语句的时刻。</li>
<li>sysdate()：获取的是执行sysdate()函数的时刻。</li>
</ul>
<h4 id="获取当前日期"><a href="#获取当前日期" class="headerlink" title="获取当前日期"></a>获取当前日期</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672707770762-e9723219-562f-4a53-9d8a-9055ee80c25d.png#averageHue=%2311100f&clientId=uc0e8c595-6b95-4&from=paste&height=543&id=ufc58343c&originHeight=655&originWidth=440&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29141&status=done&style=shadow&taskId=u707d5711-bda8-4f35-89c5-f39da3e879f&title=&width=365" alt="image.png"><br>获取当前日期有三种写法，掌握任意一种即可：</p>
<ul>
<li>curdate()</li>
<li>current_date()</li>
<li>current_date</li>
</ul>
<h4 id="获取当前时间"><a href="#获取当前时间" class="headerlink" title="获取当前时间"></a>获取当前时间</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672707856778-8eec2322-c3c8-4ddc-94c4-3e08eea430a8.png#averageHue=%23121010&clientId=uc0e8c595-6b95-4&from=paste&height=653&id=u57a306e4&originHeight=653&originWidth=430&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28651&status=done&style=shadow&taskId=ua03065f0-48bc-43c2-ae47-b77fab8249f&title=&width=430" alt="image.png"><br>获取档期时间有三种写法，掌握其中一种即可：</p>
<ul>
<li>curtime()</li>
<li>current_time()</li>
<li>current_time</li>
</ul>
<h4 id="获取单独的年、月、日、时、分、秒"><a href="#获取单独的年、月、日、时、分、秒" class="headerlink" title="获取单独的年、月、日、时、分、秒"></a>获取单独的年、月、日、时、分、秒</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672708190559-a1d93032-699d-49dc-87cc-4ccb045bee28.png#averageHue=%23100f0e&clientId=uc0e8c595-6b95-4&from=paste&height=651&id=u5badb85c&originHeight=651&originWidth=456&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28555&status=done&style=shadow&taskId=u742f8377-b4d8-44e9-950d-da020890e07&title=&width=456" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672708242288-89a20209-4ca2-4d1c-a1b0-5ad5f1179841.png#averageHue=%2311100f&clientId=uc0e8c595-6b95-4&from=paste&height=653&id=u7cfcb11b&originHeight=653&originWidth=483&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28868&status=done&style=shadow&taskId=u43769b4b-00e8-4dfb-a085-19858d725f1&title=&width=483" alt="image.png"><br>注意：这些函数在使用的时候，需要传递一个日期参数给它，它可以获取到你给定的这个日期相关的年、月、日、时、分、秒的信息。<br>一次性提取一个给定日期的“年月日”部分，可以使用date()函数，例如：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672713926559-d9c4257b-3536-4124-b4f4-3fd3626a293e.png#averageHue=%2311100f&clientId=uc0e8c595-6b95-4&from=paste&height=168&id=u161f961c&originHeight=168&originWidth=438&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7552&status=done&style=shadow&taskId=ub9643e54-a1b4-424f-a2d7-e15c7538b83&title=&width=438" alt="image.png"><br>一次性提取一个给定日期的“时分秒”部分，可以使用time()函数，例如：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672721340191-9c568184-73b5-4c26-9035-95245016ba4f.png#averageHue=%2311100f&clientId=uc0e8c595-6b95-4&from=paste&height=161&id=u0bb5bc88&originHeight=161&originWidth=428&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7598&status=done&style=shadow&taskId=u09037fc7-e074-481b-bf6a-ccc8fc49cf6&title=&width=428" alt="image.png"></p>
<h4 id="date-add函数"><a href="#date-add函数" class="headerlink" title="date_add函数"></a>date_add函数</h4><p>date_add函数的作用：给指定的日期添加间隔的时间，从而得到一个新的日期。<br>date_add函数的语法格式：date_add(日期, interval expr 单位)，例如：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672709352877-e64de4c0-d776-4e30-908b-4a96c04bc186.png#averageHue=%23121110&clientId=uc0e8c595-6b95-4&from=paste&height=174&id=ub79687f8&originHeight=174&originWidth=771&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11929&status=done&style=shadow&taskId=u79db77b4-bf0f-41ee-91ba-e6e48424d32&title=&width=771" alt="image.png"><br>以’2023-01-03’为基准，间隔3天之后的日期：’2023-01-06’<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672709436259-c6d671c6-ccc8-4109-9612-1f178801ef64.png#averageHue=%23121110&clientId=uc0e8c595-6b95-4&from=paste&height=171&id=ub0dc1d88&originHeight=171&originWidth=778&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11798&status=done&style=shadow&taskId=u06a7162d-aafa-4469-8f12-d3ea81c1f63&title=&width=778" alt="image.png"></p>
<p>以’2023-01-03’为基准，间隔3个月之后的日期：’2023-04-03’<br>详细解释一下这个函数的相关参数：</p>
<ul>
<li>日期：一个日期类型的数据</li>
<li>interval：关键字，翻译为“间隔”，固定写法</li>
<li>expr：指定具体的间隔量，一般是一个数字。<strong>也可以为负数，如果为负数，效果和date_sub函数相同</strong>。</li>
<li>单位：<ul>
<li>year：年</li>
<li>month：月</li>
<li>day：日</li>
<li>hour：时</li>
<li>minute：分</li>
<li>second：秒</li>
<li>microsecond：微秒（1秒等于1000毫秒，1毫秒等于1000微秒）</li>
<li>week：周</li>
<li>quarter：季度</li>
</ul>
</li>
</ul>
<p>请分析下面这条SQL语句所表达的含义：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672710673500-8afb96ad-3aa5-4adb-9160-9aaac4b4ff83.png#averageHue=%23131211&clientId=uc0e8c595-6b95-4&from=paste&height=162&id=u455ecd04&originHeight=162&originWidth=1036&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12957&status=done&style=shadow&taskId=u3148a05b-3fbe-432e-8492-373fde1d2db&title=&width=1036" alt="image.png"><br>以上SQL表示：以2022-10-01 10:10:10为基准，在这个时间基础上添加-1微秒，也就是减去1微秒。<br>以上SQL也可以采用date_sub函数完成，例如：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672710799157-9775a5b0-143f-493b-a6f0-cd8db5c6ca31.png#averageHue=%23131211&clientId=uc0e8c595-6b95-4&from=paste&height=159&id=u70af0451&originHeight=159&originWidth=990&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13185&status=done&style=shadow&taskId=u7bf2be69-c836-4951-bd99-69c09f553ec&title=&width=990" alt="image.png"><br>另外，单位也可以采用复合型单位，例如：</p>
<ul>
<li>SECOND_MICROSECOND</li>
<li>MINUTE_MICROSECOND</li>
<li>MINUTE_SECOND：几分几秒之后</li>
<li>HOUR_MICROSECOND</li>
<li>HOUR_SECOND</li>
<li>HOUR_MINUTE：几小时几分之后</li>
<li>DAY_MICROSECOND</li>
<li>DAY_SECOND</li>
<li>DAY_MINUTE</li>
<li>DAY_HOUR：几天几小时之后</li>
<li>YEAR_MONTH：几年几个月之后</li>
</ul>
<p>如果单位采用复合型的话，expr该怎么写呢？例如单位采用：day_hour，假设我要表示3天2小时之后，怎么写？<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672711325140-0a281589-4bc2-4fc8-bd7f-9a5ff180ba71.png#averageHue=%23121110&clientId=uc0e8c595-6b95-4&from=paste&height=171&id=u186c11d0&originHeight=171&originWidth=1009&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13317&status=done&style=shadow&taskId=u2827b5bf-37d2-486f-9db8-fa8b15ce510&title=&width=1009" alt="image.png"><br>‘3,2’这个应该很好理解，表示3天2个小时之后。’3,2’和day_hour是对应的。</p>
<h4 id="date-format日期格式化函数"><a href="#date-format日期格式化函数" class="headerlink" title="date_format日期格式化函数"></a>date_format日期格式化函数</h4><p>将日期转换成具有某种格式的日期字符串，通常用在查询操作当中。（date类型转换成char类型）<br>语法格式：date_format(日期, ‘日期格式’)<br>该函数有两个参数：</p>
<ul>
<li>第一个参数：日期。这个参数就是即将要被格式化的日期。类型是date类型。</li>
<li>第二个参数：指定要格式化的格式字符串。<ul>
<li>%Y：四位年份</li>
<li>%y：两位年份</li>
<li>%m：月份（1..12）</li>
<li>%d：日（1..30）</li>
<li>%H：小时（0..23）</li>
<li>%i：分（0..59）</li>
<li>%s：秒（0..59）</li>
</ul>
</li>
</ul>
<p>例如：获取当前系统时间，让其以这个格式展示：2000-10-11 20:15:30<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672716928881-badddb77-c670-43f3-8b25-8e2eb4952a04.png#averageHue=%23121110&clientId=uc0e8c595-6b95-4&from=paste&height=168&id=uf1769116&originHeight=168&originWidth=790&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12687&status=done&style=shadow&taskId=u0936983e-6c2d-4e0f-96a9-905426534b9&title=&width=790" alt="image.png"><br>注意：在mysql当中，默认的日期格式就是：%Y-%m-%d %H:%i:%s，所以当你直接输出日期数据的时候，会自动转换成该格式的字符串：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672717081322-e99bdff0-76df-4fcc-958a-463bf9e65d9d.png#averageHue=%23131110&clientId=uc0e8c595-6b95-4&from=paste&height=164&id=udf0a9e15&originHeight=164&originWidth=369&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7005&status=done&style=shadow&taskId=ua8a7ba31-3b81-427d-8a55-a8a84114389&title=&width=369" alt="image.png"></p>
<h4 id="str-to-date函数"><a href="#str-to-date函数" class="headerlink" title="str_to_date函数"></a>str_to_date函数</h4><p>该函数的作用是将char类型的日期字符串转换成日期类型date，通常使用在插入和修改操作当中。（char类型转换成date类型）<br>假设有一个学生表t_student，学生有一个生日的字段，类型是date类型：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_student;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  birth <span class="type">date</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">desc</span> t_student;</span><br></pre></td></tr></table></figure>

<p>我们要给这个表插入一条数据：姓名zhangsan，生日85年10月1日，执行以下insert语句：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672718111465-698c085a-b3f1-4523-9f3f-d27ceb4410d5.png#averageHue=%231b1815&clientId=uc0e8c595-6b95-4&from=paste&height=59&id=u816b6342&originHeight=59&originWidth=1163&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13327&status=done&style=shadow&taskId=u25e9289a-7274-49fc-9db5-e54cc764c7d&title=&width=1163" alt="image.png"><br>错误原因：日期值不正确。意思是：birth字段需要一个日期，你给的这个字符串’10&#x2F;01&#x2F;1985’我识别不了。这种情况下，我们就可以使用str_to_date函数进行类型转换：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672718492868-58ab55ff-a4e7-481f-9c58-9c81014d1762.png#averageHue=%2315100f&clientId=uc0e8c595-6b95-4&from=paste&height=83&id=u3cdb0924&originHeight=83&originWidth=1379&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12797&status=done&style=shadow&taskId=u619f99b1-3107-44e6-8738-542c8b9aaf8&title=&width=1379" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672718610506-ec24a44e-7854-4037-8567-b42dfb9228c0.png#averageHue=%23121110&clientId=uc0e8c595-6b95-4&from=paste&height=159&id=uf93570e5&originHeight=159&originWidth=533&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8550&status=done&style=shadow&taskId=ua5be6705-7bc3-46b4-9922-15d9020df6e&title=&width=533" alt="image.png"><br>当然，如果你提供的日期字符串格式能够被mysql解析，str_to_date函数是可以省略的，<strong>底层会自动调用该函数进行类型转换</strong>：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672718807175-8b62c13a-e771-482d-a999-7548501da25e.png#averageHue=%23110f0e&clientId=uc0e8c595-6b95-4&from=paste&height=625&id=u14b85262&originHeight=625&originWidth=1088&originalType=binary&ratio=1&rotation=0&showTitle=false&size=66015&status=done&style=shadow&taskId=uae019b86-851f-4348-962a-a15199adc0f&title=&width=1088" alt="image.png"><br>如果日期格式符合以上的几种格式，mysql都会自动进行类型转换的。</p>
<h4 id="dayofweek、dayofmonth、dayofyear函数"><a href="#dayofweek、dayofmonth、dayofyear函数" class="headerlink" title="dayofweek、dayofmonth、dayofyear函数"></a>dayofweek、dayofmonth、dayofyear函数</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672719401783-7ea51704-954a-4f96-aa81-3a8da4b34582.png#averageHue=%23110f0e&clientId=uc0e8c595-6b95-4&from=paste&height=665&id=u1a4c7890&originHeight=665&originWidth=685&originalType=binary&ratio=1&rotation=0&showTitle=false&size=39505&status=done&style=shadow&taskId=u36f1ca0f-c525-47e4-8ccf-df5d8210281&title=&width=685" alt="image.png"><br>dayofweek：一周中的第几天（1<del>7），周日是1，周六是7。<br>dayofmonth：一个月中的第几天（1</del>31）<br>dayofyear：一年中的第几天（1~366)</p>
<h4 id="last-day函数"><a href="#last-day函数" class="headerlink" title="last_day函数"></a>last_day函数</h4><p>获取给定日期所在月的最后一天的日期：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672719572099-bba462b8-da22-42b7-9a40-9c2c545596ef.png#averageHue=%23121010&clientId=uc0e8c595-6b95-4&from=paste&height=163&id=u8cab6ec4&originHeight=163&originWidth=498&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8323&status=done&style=shadow&taskId=ucef40e03-23be-4936-a671-ac674c20438&title=&width=498" alt="image.png"></p>
<h4 id="datediff函数"><a href="#datediff函数" class="headerlink" title="datediff函数"></a>datediff函数</h4><p>计算两个日期之间所差天数：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672720897012-c5e7e6dd-29de-46b0-b2c1-e1de3e8d6e54.png#averageHue=%23121110&clientId=uc0e8c595-6b95-4&from=paste&height=169&id=u9b900968&originHeight=169&originWidth=865&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10814&status=done&style=shadow&taskId=ufb6d4060-84b9-44b3-8694-a9cf990bc54&title=&width=865" alt="image.png"><br>时分秒不算，只计算日期部分相差的天数。</p>
<h4 id="timediff函数"><a href="#timediff函数" class="headerlink" title="timediff函数"></a>timediff函数</h4><p>计算两个日期所差时间，例如日期1和日期2所差10:20:30，表示差10小时20分钟30秒。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672721193551-f65b470a-9060-4010-b172-b34eb1787e55.png#averageHue=%23121110&clientId=uc0e8c595-6b95-4&from=paste&height=168&id=u56a06c8e&originHeight=168&originWidth=987&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11553&status=done&style=shadow&taskId=ua81b206f-eb6b-47b3-ad2a-e4b048fdd31&title=&width=987" alt="image.png"></p>
<h3 id="if函数"><a href="#if函数" class="headerlink" title="if函数"></a>if函数</h3><p>如果条件为TRUE则返回“YES”，如果条件为FALSE则返回“NO”：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> IF(<span class="number">500</span><span class="operator">&lt;</span><span class="number">1000</span>, &quot;YES&quot;, &quot;NO&quot;);</span><br></pre></td></tr></table></figure>

<p>例如：如果工资高于3000，则输出1，反之则输出0<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672725980625-f929cbdc-41ec-49d4-a5de-bc753dfbe67e.png#averageHue=%230f0e0e&clientId=uc0e8c595-6b95-4&from=paste&height=536&id=ued7bfdee&originHeight=536&originWidth=747&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29371&status=done&style=shadow&taskId=uec5813f3-7f94-4ae2-9644-78e1fd281f6&title=&width=747" alt="image.png"><br>再例如：如果名字是SMITH的，工资上调10%，其他员工工资正常显示。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672726073468-51733168-6ebe-477d-9aba-267adcefd10a.png#averageHue=%23100f0e&clientId=uc0e8c595-6b95-4&from=paste&height=534&id=uf2148f3a&originHeight=534&originWidth=992&originalType=binary&ratio=1&rotation=0&showTitle=false&size=38069&status=done&style=shadow&taskId=u7679358d-9412-4000-b8cd-872e9980209&title=&width=992" alt="image.png"><br>再例如：工作岗位是MANAGER的工资上调10%，是SALESMAN的工资上调20%，其他岗位工资正常。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672726371265-19128e1a-47cf-46b0-9b80-310d37010535.png#averageHue=%23100f0e&clientId=uc0e8c595-6b95-4&from=paste&height=532&id=u575eb753&originHeight=532&originWidth=1441&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55630&status=done&style=shadow&taskId=uf0e71940-399c-4edf-bd67-14f893e719e&title=&width=1441" alt="image.png"><br><strong>上面这个需求也可以使用：case.. when.. then.. when.. then.. else.. end来完成：</strong><br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672726864928-8206091b-3bd3-4f12-b784-173aff775d6f.png#averageHue=%23141210&clientId=uc0e8c595-6b95-4&from=paste&height=724&id=u37fc5544&originHeight=724&originWidth=561&originalType=binary&ratio=1&rotation=0&showTitle=false&size=57934&status=done&style=shadow&taskId=u812c7487-a5f1-4d90-a5bd-891e360d45b&title=&width=561" alt="image.png"></p>
<h3 id="cast函数"><a href="#cast函数" class="headerlink" title="cast函数"></a>cast函数</h3><p>cast函数用于<strong>转换数据类型</strong><br>语法：cast(值 as 数据类型)<br>例如：cast(‘2020-10-11’ as date)，表示将字符串’2020-10-11’转换成日期date类型。<br>在使用cast函数时，可用的数据类型包括：</p>
<ul>
<li>date：日期类型</li>
<li>time：时间类型</li>
<li>datetime：日期时间类型</li>
<li>signed：有符号的int类型（有符号指的是正数负数）</li>
<li>char：定长字符串类型</li>
<li>decimal：浮点型</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672737293605-d7e38772-e9c3-40ab-a7ea-3311aa14a1a9.png#averageHue=%2311100f&clientId=uc0e8c595-6b95-4&from=paste&height=662&id=u174ddf1e&originHeight=662&originWidth=778&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34283&status=done&style=shadow&taskId=u2531ed29-bfef-4efc-a5b0-6ff107330b6&title=&width=778" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672737634602-96cdd564-1220-445e-9b18-b3f0a2a55379.png#averageHue=%2311100f&clientId=uc0e8c595-6b95-4&from=paste&height=435&id=ued100771&originHeight=435&originWidth=545&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18617&status=done&style=shadow&taskId=u559bfe74-f2ec-4e05-a37f-2cd08b29cde&title=&width=545" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672737720321-3812fd42-d3a4-4985-96d2-629947d9ce48.png#averageHue=%23111010&clientId=uc0e8c595-6b95-4&from=paste&height=213&id=ua7df14ff&originHeight=213&originWidth=604&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10420&status=done&style=shadow&taskId=u66dc0647-a030-400f-8ec0-b3c2b22a844&title=&width=604" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672737802812-d04d581c-138c-4e4e-97d4-c979558e9b2e.png#averageHue=%2311100f&clientId=uc0e8c595-6b95-4&from=paste&height=170&id=u214f15ff&originHeight=170&originWidth=714&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8572&status=done&style=shadow&taskId=ud2929b4c-8582-4dc3-a2ba-8de75b96e58&title=&width=714" alt="image.png"></p>
<h3 id="加密函数"><a href="#加密函数" class="headerlink" title="加密函数"></a>加密函数</h3><p>md5函数，可以将给定的字符串经过md5算法进行加密处理，字符串经过加密之后会生成一个固定长度32位的字符串，md5加密之后的密文通常是不能解密的：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1672737046172-5ee0458a-60c6-4bae-b075-94b7dee440ab.png#averageHue=%23131110&clientId=uc0e8c595-6b95-4&from=paste&height=220&id=u6e900f32&originHeight=220&originWidth=568&originalType=binary&ratio=1&rotation=0&showTitle=false&size=10865&status=done&style=shadow&taskId=uabd2a6f3-e59b-4dac-ba4c-bcc743fafad&title=&width=568" alt="image.png"></p>
<h2 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h2><p><strong>分组函数的执行原则：先分组，然后对每一组数据执行分组函数。如果没有分组语句group by的话，整张表的数据自成一组。</strong><br>分组函数包括五个：</p>
<ul>
<li>max：最大值</li>
<li>min：最小值</li>
<li>avg：平均值</li>
<li>sum：求和</li>
<li>count：计数</li>
</ul>
<h3 id="max"><a href="#max" class="headerlink" title="max"></a>max</h3><p><strong>找出员工的最高薪资</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(sal) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<h3 id="min"><a href="#min" class="headerlink" title="min"></a>min</h3><p><strong>找出员工的最低工资</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(sal) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<h3 id="avg"><a href="#avg" class="headerlink" title="avg"></a>avg</h3><p><strong>计算员工的平均薪资</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<h3 id="sum"><a href="#sum" class="headerlink" title="sum"></a>sum</h3><p><strong>计算员工的工资和</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(sal) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><strong>计算员工的津贴之和</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(comm) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>重点：所有的分组函数都是自动忽略NULL的。</p>
<h3 id="count"><a href="#count" class="headerlink" title="count"></a>count</h3><p><strong>统计员工人数</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(ename) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>count(*)和count(1)的效果一样，统计该组中总记录<strong>行数</strong>。<br>count(ename)统计的是这个ename字段中不为NULL个数总和。<br>例如：count(comm) 结果是 4，而不是14</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(comm) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><strong>统计岗位数量</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> job) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<h3 id="分组函数组合使用"><a href="#分组函数组合使用" class="headerlink" title="分组函数组合使用"></a>分组函数组合使用</h3><p>select count(*),max(sal),min(sal),avg(sal),sum(sal) from emp;</p>
<h3 id="分组函数注意事项"><a href="#分组函数注意事项" class="headerlink" title="分组函数注意事项"></a>分组函数注意事项</h3><p><strong>分组函数不能直接使用在where子句当中</strong><br>select ename,job from emp where sal &gt; avg(sal); 这个会报错的<br>原因：<strong>分组的行为是在where执行之后才开始的</strong>。</p>
<h2 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h2><h3 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h3><p>按照某个字段分组，或者按照某些字段联合分组。注意：group by的执行是在where之后执行。<br>语法：<br>group by 字段<br>group by 字段1,字段2,字段3….<br><strong>找出每个岗位的平均薪资</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> job, <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job;</span><br></pre></td></tr></table></figure>

<p><strong>找出每个部门最高工资</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">max</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br></pre></td></tr></table></figure>

<p><strong>找出每个部门不同岗位的平均薪资</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,job,<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno,job;</span><br></pre></td></tr></table></figure>

<p><strong>当select语句中有group by的话，select后面只能跟分组函数或参加分组的字段</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,deptno,<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno; <span class="operator">/</span><span class="operator">/</span> 这个<span class="keyword">SQL</span>执行后会报错。</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1676866192155-44d23157-87d0-4a58-a9d5-2641619d74fe.png#averageHue=%23171412&clientId=u417b9e29-4007-4&from=paste&height=140&id=uae74e6b8&originHeight=140&originWidth=1141&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25591&status=done&style=shadow&taskId=u4097c74b-3d21-485a-a74f-1390352d2e3&title=&width=1141" alt="image.png"></p>
<h3 id="having"><a href="#having" class="headerlink" title="having"></a>having</h3><p>having写在group by的后面，当你对分组之后的数据不满意，可以继续通过having对分组之后的数据进行过滤。<br><strong>where的过滤是在分组前进行过滤</strong>。<br>使用原则：尽量在where中过滤，实在不行，再使用having。<strong>越早过滤效率越高</strong>。</p>
<p><strong>找出除20部分之外，其它部门的平均薪资。</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">where</span> deptno<span class="operator">&lt;&gt;</span><span class="number">20</span> <span class="keyword">group</span> <span class="keyword">by</span> deptno; <span class="operator">/</span><span class="operator">/</span> 建议</span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> deptno <span class="operator">&lt;&gt;</span> <span class="number">20</span>; <span class="operator">/</span><span class="operator">/</span> 不建议</span><br></pre></td></tr></table></figure>


<p><strong>查询每个部门平均薪资，找出平均薪资高于2000的。</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">avg</span>(sal) <span class="operator">&gt;</span> <span class="number">2000</span>;</span><br></pre></td></tr></table></figure>

<h3 id="组内排序"><a href="#组内排序" class="headerlink" title="组内排序"></a>组内排序</h3><p>案例：找出每个工作岗位的工资排名在前两名的。<br>substring_index函数的使用：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1678080182698-009c47d2-eb75-4f67-afaa-874c7904ed45.png#averageHue=%2312100f&clientId=ue32f086e-fc2b-4&from=paste&height=379&id=rhnfq&originHeight=379&originWidth=755&originalType=binary&ratio=1&rotation=0&showTitle=false&size=27939&status=done&style=shadow&taskId=u49228cac-a6a0-4d31-8dbc-abc432cd804&title=&width=755" alt="image.png"><br>group_concat函数的使用：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1678082111760-02413f4e-a8b0-4837-8cb0-3b201151293f.png#averageHue=%23100f0e&clientId=ue32f086e-fc2b-4&from=paste&height=272&id=bhhYI&originHeight=272&originWidth=904&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20533&status=done&style=shadow&taskId=uac8b6d07-c85c-47d4-9724-b29c1e8f927&title=&width=904" alt="image.png"><br>学习了这两个函数之后，自己可以尝试写出来吗？</p>
<h2 id="总结单表的DQL语句"><a href="#总结单表的DQL语句" class="headerlink" title="总结单表的DQL语句"></a>总结单表的DQL语句</h2><p>select …5<br>from …1<br>where …2<br>group by …3<br>having …4<br>order by …6<br>重点掌握一个完整的DQL语句执行顺序。</p>
<h2 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h2><h3 id="什么是连接查询"><a href="#什么是连接查询" class="headerlink" title="什么是连接查询"></a>什么是连接查询</h3><ol>
<li>从一张表中查询数据称为单表查询。</li>
<li>从两张或更多张表中联合查询数据称为多表查询，又叫做连接查询。</li>
<li>什么时候需要使用连接查询？<ol>
<li>比如这样的需求：员工表中有员工姓名，部门表中有部门名字，要求查询每个员工所在的部门名字，这个时候就需要连接查询。</li>
</ol>
</li>
</ol>
<h3 id="连接查询的分类"><a href="#连接查询的分类" class="headerlink" title="连接查询的分类"></a>连接查询的分类</h3><ol>
<li>根据语法出现的年代进行分类：<ol>
<li>SQL92（这种语法很少用，可以不用学。）</li>
<li>SQL99（我们主要学习这种语法。）</li>
</ol>
</li>
<li>根据连接方式的不同进行分类：<ol>
<li>内连接<ol>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ol>
</li>
<li>外连接<ol>
<li>左外连接（左连接）</li>
<li>右外连接（右连接）</li>
</ol>
</li>
<li>全连接</li>
</ol>
</li>
</ol>
<h3 id="笛卡尔积现象"><a href="#笛卡尔积现象" class="headerlink" title="笛卡尔积现象"></a>笛卡尔积现象</h3><ol>
<li>当两张表进行连接查询时，如果没有任何条件进行过滤，最终的查询结果条数是两张表条数的乘积。为了避免笛卡尔积现象的发生，需要添加条件进行筛选过滤。</li>
<li>需要注意：添加条件之后，虽然避免了笛卡尔积现象，但是匹配的次数没有减少。</li>
<li>为了SQL语句的可读性，为了执行效率，建议给表起别名。</li>
</ol>
<h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><h4 id="什么叫内连接"><a href="#什么叫内连接" class="headerlink" title="什么叫内连接"></a>什么叫内连接</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677398804476-afbffad7-7d5a-4318-9e86-a3f8092dfcc8.png#averageHue=%23f7f5f5&clientId=u1be67ea7-0240-4&from=paste&height=233&id=u4f6abf7d&originHeight=233&originWidth=300&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29826&status=done&style=shadow&taskId=u51112874-93e5-4ef2-8366-f78cc265d04&title=&width=300" alt="内连接.png"><br>满足条件的记录才会出现在结果集中。</p>
<h4 id="内连接之等值连接"><a href="#内连接之等值连接" class="headerlink" title="内连接之等值连接"></a>内连接之等值连接</h4><p>连接时，条件为等量关系。<br>案例：查询每个员工所在的部门名称，要求显示员工名、部门名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	e.ename,d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span></span><br><span class="line">	dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">	e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure>

<p>注意：inner可以省略。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677401675659-04e46e96-9f00-4210-8beb-e8148807ae10.png#averageHue=%231a1613&clientId=u1be67ea7-0240-4&from=paste&height=380&id=u91e060d7&originHeight=380&originWidth=258&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15942&status=done&style=shadow&taskId=u2319a8db-57a3-4bcb-a42b-b58c46e0381&title=&width=258" alt="image.png"></p>
<h4 id="内连接之非等值连接"><a href="#内连接之非等值连接" class="headerlink" title="内连接之非等值连接"></a>内连接之非等值连接</h4><p>连接时，条件是非等量关系。<br>案例：查询每个员工的工资等级，要求显示员工名、工资、工资等级。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	e.ename,e.sal,s.grade</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">	salgrade s</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">	e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677401628377-11f115a0-b961-4e10-b411-97ea04a89035.png#averageHue=%23191613&clientId=u1be67ea7-0240-4&from=paste&height=380&id=u9ef14890&originHeight=380&originWidth=279&originalType=binary&ratio=1&rotation=0&showTitle=false&size=17957&status=done&style=shadow&taskId=u97872f0c-74c1-40ef-b3bb-607697cbe62&title=&width=279" alt="image.png"></p>
<h4 id="内连接之自连接"><a href="#内连接之自连接" class="headerlink" title="内连接之自连接"></a>内连接之自连接</h4><p>连接时，一张表看做两张表，自己和自己进行连接。<br>案例：找出每个员工的直属领导，要求显示员工名、领导名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	e.ename 员工名, l.ename 领导名</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">	emp l</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">	e.mgr <span class="operator">=</span> l.empno;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677402107820-a3fc38cc-4e13-4a39-8bb4-f1d9de713cd9.png#averageHue=%23161311&clientId=u1be67ea7-0240-4&from=paste&height=363&id=ub784a9c1&originHeight=363&originWidth=256&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15854&status=done&style=shadow&taskId=u67543946-a969-42f9-a55b-91571731d16&title=&width=256" alt="image.png"><br>思路：<br>将emp表当做员工表 e<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677401951879-b0967e07-82f4-41e3-861e-d61e7d679e71.png#averageHue=%23141210&clientId=u1be67ea7-0240-4&from=paste&height=409&id=u4a5d8630&originHeight=409&originWidth=409&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28580&status=done&style=shadow&taskId=ua9050736-6b86-415c-9f4d-e4e8d72c0b5&title=&width=409" alt="image.png"><br>将emp表当做领导表 l<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677401973338-4bc03ba9-815d-4fca-90fb-de34e5848da3.png#averageHue=%2312100f&clientId=u1be67ea7-0240-4&from=paste&height=409&id=uffcf8f58&originHeight=409&originWidth=374&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19851&status=done&style=shadow&taskId=uad8210e5-8156-449c-bc2f-25f2614109b&title=&width=374" alt="image.png"><br>可以发现连接条件是：e.mgr &#x3D; l.empno（员工的领导编号&#x3D;领导的员工编号）<br>注意：KING这个员工没有查询出来。如果想将KING也查询出来，需要使用外连接。</p>
<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><h4 id="什么叫外连接"><a href="#什么叫外连接" class="headerlink" title="什么叫外连接"></a>什么叫外连接</h4><p>内连接是满足条件的记录查询出来。也就是两张表的交集。<br>外连接是除了满足条件的记录查询出来，再将其中一张表的记录全部查询出来，另一张表如果没有与之匹配的记录，自动模拟出NULL与其匹配。<br>左外连接：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677398828684-41b0bde2-1689-47a4-ae7b-3c5c4fb82ce6.png#averageHue=%23f5e6e4&clientId=u1be67ea7-0240-4&from=paste&height=233&id=ue0f4c04f&originHeight=233&originWidth=300&originalType=binary&ratio=1&rotation=0&showTitle=false&size=42064&status=done&style=shadow&taskId=u3697d149-d9f5-4090-8773-ffb0962ff90&title=&width=300" alt="左连接.png"><br>右外连接：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677398837026-688ff40f-d74b-4da6-a2e4-9573f5ba1580.png#averageHue=%23f4e6e3&clientId=u1be67ea7-0240-4&from=paste&height=233&id=ua18b1d44&originHeight=233&originWidth=300&originalType=binary&ratio=1&rotation=0&showTitle=false&size=43272&status=done&style=shadow&taskId=u4bb1c6ab-4c51-4fe0-938b-a7950969180&title=&width=300" alt="右连接.png"></p>
<h4 id="外连接之左外连接（左连接）"><a href="#外连接之左外连接（左连接）" class="headerlink" title="外连接之左外连接（左连接）"></a>外连接之左外连接（左连接）</h4><p>案例：查询所有部门信息，并且找出每个部门下的员工。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  d.<span class="operator">*</span>,e.ename</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  dept d</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span></span><br><span class="line">  emp e</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">  d.deptno <span class="operator">=</span> e.deptno;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677402955987-bdcd956a-8dd4-481b-97de-c785b200e902.png#averageHue=%23171411&clientId=u1be67ea7-0240-4&from=paste&height=408&id=ud8f95a62&originHeight=408&originWidth=470&originalType=binary&ratio=1&rotation=0&showTitle=false&size=36154&status=done&style=shadow&taskId=u3263d663-860e-41a9-b973-50a3be9baa0&title=&width=470" alt="image.png"><br>注意：outer可以省略。<br>任何一个左连接都可以写作右连接。</p>
<h4 id="外连接之右外连接（右连接）"><a href="#外连接之右外连接（右连接）" class="headerlink" title="外连接之右外连接（右连接）"></a>外连接之右外连接（右连接）</h4><p>还是上面的案例，可以写作右连接。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">  d.<span class="operator">*</span>,e.ename</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">  emp e</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span></span><br><span class="line">  dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">  d.deptno <span class="operator">=</span> e.deptno;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677403445932-325502d5-b568-46a5-8f7a-d91030f3cac3.png#averageHue=%23191411&clientId=u1be67ea7-0240-4&from=paste&height=412&id=ue32d3266&originHeight=412&originWidth=454&originalType=binary&ratio=1&rotation=0&showTitle=false&size=36142&status=done&style=shadow&taskId=u28ef1b62-f835-472a-b916-1ee2eb5299b&title=&width=454" alt="image.png"><br>案例：找出所有员工的上级领导，要求显示员工名和领导名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  e.ename 员工名,l.ename 领导名 </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">  emp e </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> </span><br><span class="line">  emp l </span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">  e.mgr <span class="operator">=</span> l.empno;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">  e.ename 员工名,l.ename 领导名 </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">  emp l </span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> </span><br><span class="line">  emp e </span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">  e.mgr <span class="operator">=</span> l.empno;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677403569294-c9688076-61e2-4e33-bb40-06d4307c6b43.png#averageHue=%23171210&clientId=u1be67ea7-0240-4&from=paste&height=386&id=ud80e0755&originHeight=386&originWidth=273&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16908&status=done&style=shadow&taskId=uded0f105-8d51-486b-97fb-acb24822774&title=&width=273" alt="image.png"></p>
<h3 id="全连接"><a href="#全连接" class="headerlink" title="全连接"></a>全连接</h3><p>什么是全连接？<br>MySQL不支持full join。oracle数据库支持。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677398846702-4a3f3e0f-16bb-4e00-8015-490dc44d114b.png#averageHue=%23f2d7d2&clientId=u1be67ea7-0240-4&from=paste&height=233&id=u050103a2&originHeight=233&originWidth=300&originalType=binary&ratio=1&rotation=0&showTitle=false&size=51399&status=done&style=shadow&taskId=ued746d97-47c2-46a3-83cd-097182ea146&title=&width=300" alt="全连接.png"><br>两张表数据全部查询出来，没有匹配的记录，各自为对方模拟出NULL进行匹配。<br>客户表：t_customer<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677405118434-d9979d32-5647-4b0a-8d65-1ff6b61c6d44.png#averageHue=%23131210&clientId=u1be67ea7-0240-4&from=paste&height=137&id=u66bb1e76&originHeight=137&originWidth=235&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4218&status=done&style=shadow&taskId=u7d338668-6c7a-488f-851d-635afa97d29&title=&width=235" alt="image.png"><br>订单表：t_order<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677405287024-4df811ac-9216-47c3-98b2-20f5d7ce2886.png#averageHue=%23151311&clientId=u1be67ea7-0240-4&from=paste&height=136&id=u8ef1b39a&originHeight=136&originWidth=261&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4032&status=done&style=shadow&taskId=u69ae2de5-204a-4a0b-8d2f-67ccbc73ad2&title=&width=261" alt="image.png"><br>案例：查询所有的客户和订单。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line"> c.<span class="operator">*</span>,o.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line"> t_customer c </span><br><span class="line"><span class="keyword">full</span> <span class="keyword">join</span> </span><br><span class="line"> t_order o </span><br><span class="line"><span class="keyword">on</span> </span><br><span class="line"> c.cid <span class="operator">=</span> o.cid;</span><br></pre></td></tr></table></figure>



<h3 id="多张表连接"><a href="#多张表连接" class="headerlink" title="多张表连接"></a>多张表连接</h3><p>三张表甚至更多张表如何进行表连接<br>案例：找出每个员工的部门，并且要求显示每个员工的薪资等级。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line"> e.ename,d.dname,s.grade </span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line"> emp e </span><br><span class="line"><span class="keyword">join</span> </span><br><span class="line"> dept d </span><br><span class="line"><span class="keyword">on</span> </span><br><span class="line"> e.deptno <span class="operator">=</span> d.deptno </span><br><span class="line"><span class="keyword">join</span> </span><br><span class="line"> salgrade s </span><br><span class="line"><span class="keyword">on</span> </span><br><span class="line"> e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677404511432-b8fe8eb2-c828-4913-8d7c-a7b47a0ee270.png#averageHue=%23171411&clientId=u1be67ea7-0240-4&from=paste&height=381&id=u6047af30&originHeight=381&originWidth=324&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18547&status=done&style=shadow&taskId=uc90c12f6-bdbb-4221-abe5-dcc4e221c96&title=&width=324" alt="image.png"></p>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><h3 id="什么是子查询"><a href="#什么是子查询" class="headerlink" title="什么是子查询"></a>什么是子查询</h3><ol>
<li>select语句中嵌套select语句就叫做子查询。</li>
<li>select语句可以嵌套在哪里？<ol>
<li>where后面、from后面、select后面都是可以的。</li>
</ol>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ..(<span class="keyword">select</span>)..</span><br><span class="line"><span class="keyword">from</span> ..(<span class="keyword">select</span>)..</span><br><span class="line"><span class="keyword">where</span> ..(<span class="keyword">select</span>)..</span><br></pre></td></tr></table></figure>



<h3 id="where后面使用子查询"><a href="#where后面使用子查询" class="headerlink" title="where后面使用子查询"></a>where后面使用子查询</h3><p>案例：找出高于平均薪资的员工姓名和薪资。<br>错误的示范：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="built_in">avg</span>(sal);</span><br></pre></td></tr></table></figure>

<p>错误原因：where后面不能直接使用分组函数。<br>可以使用子查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp);</span><br></pre></td></tr></table></figure>



<h3 id="from后面使用子查询"><a href="#from后面使用子查询" class="headerlink" title="from后面使用子查询"></a>from后面使用子查询</h3><p>小窍门：from后面的子查询可以看做一张临时表。<br>案例：找出每个部门的平均工资的等级。<br>第一步：先找出每个部门平均工资。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno, <span class="built_in">avg</span>(sal) avgsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677477788393-e2525a0a-2092-4a5e-80e7-7f8df04f6a6c.png#averageHue=%23151311&clientId=ud7d035d7-9c64-4&from=paste&height=163&id=u397cf064&originHeight=163&originWidth=303&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5620&status=done&style=shadow&taskId=uc8a5cf34-abe3-446f-9948-e3cedf385f9&title=&width=303" alt="image.png"><br>第二步：将以上查询结果当做临时表t，t表和salgrade表进行连接查询。条件：t.avgsal between s.losal and s.hisal</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> t.<span class="operator">*</span>,s.grade <span class="keyword">from</span> (<span class="keyword">select</span> deptno, <span class="built_in">avg</span>(sal) avgsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) t <span class="keyword">join</span> salgrade s <span class="keyword">on</span> t.avgsal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1677477892811-ef9b366b-82be-4407-86f1-8dfa81492d8c.png#averageHue=%23151311&clientId=ud7d035d7-9c64-4&from=paste&height=162&id=u5d9f4ab4&originHeight=162&originWidth=397&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7422&status=done&style=shadow&taskId=uc90565b7-edc2-43bf-ba54-1e7db925c63&title=&width=397" alt="image.png"></p>
<h3 id="select后面使用子查询"><a href="#select后面使用子查询" class="headerlink" title="select后面使用子查询"></a>select后面使用子查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.ename,(<span class="keyword">select</span> d.dname <span class="keyword">from</span> dept d <span class="keyword">where</span> e.deptno <span class="operator">=</span> d.deptno) <span class="keyword">as</span> dname <span class="keyword">from</span> emp e;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1678063689524-a204a93a-6454-4ff7-a1c6-ac5229edae91.png#averageHue=%231a1714&clientId=ud9fded62-54bb-4&from=paste&height=428&id=u2b69cf05&originHeight=428&originWidth=276&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16342&status=done&style=shadow&taskId=ua4f4e977-d3e6-4e90-8781-42050638d4a&title=&width=276" alt="image.png"></p>
<h3 id="exists、not-exists"><a href="#exists、not-exists" class="headerlink" title="exists、not exists"></a>exists、not exists</h3><p>在 MySQL 数据库中，EXISTS（存在）用于检查子查询的查询结果行数是否大于0。如果子查询的查询结果行数大于0，则 EXISTS 条件为真。（即存在查询结果则是true。）</p>
<p>主要应用场景：</p>
<ul>
<li>EXISTS 可以与 SELECT、UPDATE、DELETE 一起使用，用于检查另一个查询是否返回任何行；</li>
<li>EXISTS 可以用于验证条件子句中的表达式是否存在；</li>
<li>EXISTS 常用于子查询条件过滤，例如查询有订单的用户等。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_customer;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_order;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_customer(</span><br><span class="line">  customer_id <span class="type">int</span>,</span><br><span class="line">  customer_name <span class="type">varchar</span>(<span class="number">32</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_order(</span><br><span class="line">  order_id <span class="type">int</span>,</span><br><span class="line">  order_price <span class="type">decimal</span>(<span class="number">5</span>,<span class="number">1</span>),</span><br><span class="line">  customer_id <span class="type">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_customer(customer_id,customer_name) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;zhangsan&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_customer(customer_id,customer_name) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;lisi&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_customer(customer_id,customer_name) <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;wangwu&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_order(order_id, order_price, customer_id) <span class="keyword">values</span>(<span class="number">10</span>, <span class="number">1000.0</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_order(order_id, order_price, customer_id) <span class="keyword">values</span>(<span class="number">20</span>, <span class="number">2000.0</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_order(order_id, order_price, customer_id) <span class="keyword">values</span>(<span class="number">30</span>, <span class="number">3000.0</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_order(order_id, order_price, customer_id) <span class="keyword">values</span>(<span class="number">40</span>, <span class="number">4000.0</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_customer;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_order;</span><br></pre></td></tr></table></figure>

<p>现在我们来看一个简单的案例，假设我们要查询先前有过订单的顾客，而订单信息保存在 t_order 表中，顾客信息保存在 t_customer 表中。我们可以使用以下 sql 语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_customer c <span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_order o <span class="keyword">where</span> o.customer_id<span class="operator">=</span>c.customer_id);</span><br></pre></td></tr></table></figure>

<p>在这个查询语句中，子查询用于检查是否有订单与每个客户相关联。如果子查询返回至少一行，则表示该顾客已经下过订单，并返回此客户的所有信息，否则该顾客将不被包含在结果中。</p>
<p>以下是这个查询语句的执行过程：</p>
<ol>
<li>首先查询表 t_customer 中的所有顾客信息（以下简称为顾客表）； </li>
<li>对于顾客表中的每一行，都执行一次子查询，子查询查询该顾客有没有订单，如果有，则在结果集中保留该顾客信息；如果没有，则将该顾客排除； </li>
<li>最终返回有订单顾客的所有信息。</li>
</ol>
<p>除了 EXISTS，也可以使用 NOT EXISTS 条件从 SELECT、UPDATE、DELETE 语句中获取子查询的返回结果。NOT EXISTS 用于检查一个子查询是否返回任何行，如果没有行返回，那么 NOT EXISTS 将返回 true。</p>
<p>例如，我们想要查找所有没有下过订单的顾客，可以使用以下 sql 语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_customer c <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_order o <span class="keyword">where</span> o.customer_id<span class="operator">=</span>c.customer_id);</span><br></pre></td></tr></table></figure>

<p>在这个查询语句中，如果没有任何与顾客相关联的订单，则 NOT EXISTS 子查询将返回一个空结果集，这时候 WHERE 条件为 true，并将返回所有顾客信息。如果顾客有订单，则 NOT EXISTS 子查询的结果集将不为空，WHERE 条件为 false，则不会返回该顾客的信息。</p>
<p>总之，无论是 EXISTS 还是 NOT EXISTS，都是非常有用的 SQL 工具。可以通过它们来结合子查询来动态过滤查询结果，使 SQL 查询变得更加灵活和高效。</p>
<h3 id="in和exists区别"><a href="#in和exists区别" class="headerlink" title="in和exists区别"></a>in和exists区别</h3><p>IN 和 EXISTS 都是用于关系型数据库查询的操作符。不同之处在于：</p>
<ol>
<li>IN 操作符是根据指定列表中的值来判断是否满足条件，而 EXISTS 操作符则是根据子查询的结果是否有返回记录集来判断。 </li>
<li>EXISTS 操作符通常比 IN 操作符更快，尤其是在子查询返回记录数很大的情况下。因为 EXISTS 只需要判断是否存在符合条件的记录，而 IN 操作符需要比对整个列表，因此执行效率相对较低。 </li>
<li>IN 操作符可同时匹配多个值，而 EXISTS 只能匹配一组条件。</li>
</ol>
<p>下面是一个简单的示例，用于演示 IN 和 EXISTS 之间的区别。假设我们有两个表 orders 和 products，orders 表中记录了订单信息，products 表中记录了商品信息。现在我们想查询所有“手机”和“平板电脑”这两种商品中，至少有一笔订单销售了 $1000 以上的商品：</p>
<p>使用 IN 操作符：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> product_name <span class="keyword">IN</span> (<span class="string">&#x27;手机&#x27;</span>, <span class="string">&#x27;平板电脑&#x27;</span>)</span><br><span class="line"><span class="keyword">AND</span> product_id <span class="keyword">IN</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> product_id</span><br><span class="line">  <span class="keyword">FROM</span> orders</span><br><span class="line">  <span class="keyword">WHERE</span> order_amount <span class="operator">&gt;</span> <span class="number">1000</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>使用 EXISTS 操作符：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> product_name <span class="keyword">IN</span> (<span class="string">&#x27;手机&#x27;</span>, <span class="string">&#x27;平板电脑&#x27;</span>)</span><br><span class="line"><span class="keyword">AND</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">  <span class="keyword">FROM</span> orders</span><br><span class="line">  <span class="keyword">WHERE</span> orders.product_id <span class="operator">=</span> products.product_id</span><br><span class="line">  <span class="keyword">AND</span> order_amount <span class="operator">&gt;</span> <span class="number">1000</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>总之，IN 和 EXISTS 都是用于条件过滤的操作符，但其实现方式和性能特点都不同，需要根据具体情况进行选择和使用。</p>
<h2 id="union-union-all"><a href="#union-union-all" class="headerlink" title="union&amp;union all"></a>union&amp;union all</h2><p>不管是union还是union all都可以将两个查询结果集进行合并。<br>union会对合并之后的查询结果集进行去重操作。<br>union all是直接将查询结果集合并，不进行去重操作。（union all和union都可以完成的话，优先选择union all，union all因为不需要去重，所以效率高一些。）<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1678078225300-461e069f-0c80-4745-88a7-2969acccd076.png#averageHue=%23141210&clientId=ue32f086e-fc2b-4&from=paste&height=488&id=u46d82364&originHeight=488&originWidth=404&originalType=binary&ratio=1&rotation=0&showTitle=false&size=31584&status=done&style=shadow&taskId=u459bc800-2e1c-4247-866e-b06b0313a0c&title=&width=404" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1678078278429-e97f96a1-7429-4b68-8df9-3bda3a890797.png#averageHue=%23151210&clientId=ue32f086e-fc2b-4&from=paste&height=884&id=u2ef6109a&originHeight=884&originWidth=408&originalType=binary&ratio=1&rotation=0&showTitle=false&size=60134&status=done&style=shadow&taskId=u8c39e0b0-c274-46f0-8866-347160e1418&title=&width=408" alt="image.png"><br>案例：查询工作岗位是MANAGER和SALESMAN的员工。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> job<span class="operator">=</span><span class="string">&#x27;MANAGER&#x27;</span></span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> job<span class="operator">=</span><span class="string">&#x27;SALESMAN&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>以上案例采用or也可以完成，那or和union all有什么区别？考虑走索引优化之类的选择union all，其它选择or。<br>两个结果集合并时，列数量要相同：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1678078078467-89b7ba88-52ae-4e70-b5cc-b4fe4a3daf76.png#averageHue=%2312110f&clientId=ue32f086e-fc2b-4&from=paste&height=101&id=u85e05b84&originHeight=101&originWidth=999&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11813&status=done&style=shadow&taskId=u29bd097d-8994-4842-be9e-3bcb8865687&title=&width=999" alt="image.png"></p>
<h2 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h2><ol>
<li>limit作用：查询第几条到第几条的记录。通常是因为表中数据量太大，需要分页显示。</li>
<li>limit语法格式：<ol>
<li>limit 开始下标, 长度</li>
</ol>
</li>
<li>案例：查询员工表前5条记录</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp limit <span class="number">0</span>, <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<p>如果下标是从0开始，可以简写为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp limit <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>查询工资排名在前5名的员工（limit是在order by执行之后才会执行的）</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> limit <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>通用的分页sql</li>
</ol>
<p>假设每页显示3条记录：pageSize &#x3D; 3<br>第1页：limit 0, 3<br>第2页：limit 3, 3<br>第3页：limit 6, 3<br>第pageNo页：limit (pageNo - 1)*pageSize, pageSize</p>
<h1 id="表相关"><a href="#表相关" class="headerlink" title="表相关"></a>表相关</h1><h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">  字段名<span class="number">1</span> 数据类型,</span><br><span class="line">  字段名<span class="number">2</span> 数据类型,</span><br><span class="line">  字段名<span class="number">3</span> 数据类型,</span><br><span class="line">  ......</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>例如：创建学生表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>,</span><br><span class="line">  gender <span class="type">char</span>(<span class="number">1</span>) <span class="keyword">default</span> <span class="string">&#x27;男&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h2 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h2><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(字段名<span class="number">1</span>, 字段名<span class="number">2</span>, 字段名<span class="number">3</span>,......) <span class="keyword">values</span> (值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,......);</span><br></pre></td></tr></table></figure>

<p>字段名和值要一一对应。类型要一一对应，数量要一一对应。<br>字段名也可以省略，如果字段名省略就表示把所有字段名都写上去了，并且顺序和建表时的顺序相同。</p>
<h2 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h2><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> 表名;</span><br></pre></td></tr></table></figure>

<p>判断是否存在这个表，如果存在则删除。避免不存在时的报错。</p>
<h2 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h2><p>数据类型（data_type）是指系统中所允许的数据的类型。数据库中的每个列都应该有适当的数据类型，用于限制或允许该列中存储的数据。例如，列中存储的为数字，则相应的数据类型应该为数值类型。<br>如果使用错误的数据类型可能会严重影响应用程序的功能和性能，所以在设计表时，应该特别重视数据列所用的数据类型。更改包含数据的列不是一件小事，这样做可能会导致数据丢失。因此，在创建表时必须为每个列设置正确的数据类型和长度。<br>MySQL 的数据类型可以分为整数类型、浮点数类型、定点数类型、日期和时间类型、字符串类型、二进制类型等。</p>
<h3 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h3><p>tinyint：1个字节（微小整数）<br>smallint：2个字节（小整数）<br>mediumint：3个字节（中等大小的整数）<br><strong>int（integer）：4个字节（普通大小整数）</strong><br><strong>bigint：8个字节（大整数）</strong></p>
<h3 id="浮点数类型"><a href="#浮点数类型" class="headerlink" title="浮点数类型"></a>浮点数类型</h3><p>float：4个字节，单精度（最多5位小数）<br><strong>double：8个字节，双精度（最多16位小数）</strong></p>
<h3 id="定点数类型"><a href="#定点数类型" class="headerlink" title="定点数类型"></a>定点数类型</h3><p>decimal：定点数类型。底层实际上采用字符串的形式存储数字。<br>语法：decimal(m, d)<br>例如：decimal(3, 2) 表示3个有效数字，2个小数。（有效数字最多65个，小数位最多30个）</p>
<h3 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h3><p>year：1个字节，只存储年，格式YYYY<br>time：3个字节，只存储时间，格式HH:MM:SS &#x2F; HHMMSS<br>date：3个字节，只存储年月日，格式：YYYY-MM-DD<br>datetime：8个字节，存储年月日+时分秒，格式：YYYY-MM-DD HH:MM:SS（从公元1000年<del>公元9999年）<br>timestamp：4个字节，存储年月日+时分秒，格式：YYYY-MM-DD HH:MM:SS（从公元1980年</del>公元2040年）或者格式为 YYYYMMDDHHMMSS（采用这种格式不需要使用单引号，当然你使用单引号也可以）</p>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><h4 id="char"><a href="#char" class="headerlink" title="char"></a>char</h4><p><strong>char(m)：</strong>m长度是0~255个字符。<br>固定长度字符串，在定义时指定字符串列长。当保存时，在右侧填充空格以达到指定的长度。m表示列的长度，范围是 0～255 个字符。<br>例如，CHAR(4) 定义了一个固定长度的字符串列，包含的字符个数最大为 4。当插入的字符长度大于4，则报错（除非超过4个长度之后都是空格字符，则空格字符会自动被删除用来保证插入的成功）。</p>
<h4 id="varchar"><a href="#varchar" class="headerlink" title="varchar"></a>varchar</h4><p><strong>varchar(m)：</strong>m长度是0~16383个字符<br>长度可变的字符串。varchar 的最大实际长度由最长的行的大小和使用的字符集确定，而实际占用的空间为字符串的实际长度加 1。<br>例如，varchar(50) 定义了一个最大长度为 50 的字符串，如果插入的字符串只有 10 个字符，则实际存储的字符串为 10 个字符和一个字符串结束字符。varchar在值保存和检索时尾部的空格仍保留。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1708657200592-04aa2bf9-dbd8-4965-8631-c504c601e0cc.png#averageHue=%23f2f1f0&clientId=u339da12f-44c3-4&from=paste&height=258&id=u4ff86686&originHeight=258&originWidth=536&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11368&status=done&style=shadow&taskId=u9f251c01-9b8a-41c7-b854-ff77d4d548f&title=&width=536" alt="1708647300729-2181603b-e620-4be8-bab6-1b9c029989d8.png"></p>
<h4 id="text"><a href="#text" class="headerlink" title="text"></a>text</h4><p><strong>text类型：</strong></p>
<ul>
<li>tinytext 表示长度为 255字符的 TEXT 列。</li>
<li>text 表示长度为 65535字符的 TEXT 列。</li>
<li>mediumtext 表示长度为 16777215字符的 TEXT 列。</li>
<li>longtext 表示长度为 4294967295 或 4GB 字符的 TEXT 列。</li>
</ul>
<h4 id="enum"><a href="#enum" class="headerlink" title="enum"></a>enum</h4><p><strong>enum类型：</strong></p>
<ul>
<li>语法：&lt;字段名&gt; enum(‘值1’,’值2’,…)</li>
<li>该字段插入值时，只能是指定的枚举值。</li>
</ul>
<h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><p><strong>set类型：</strong></p>
<ul>
<li>语法：&lt;字段名&gt; set(‘值1’,’值2’,’值3’,…)   注意：值不可重复。</li>
<li>该字段插入值时，只能是指定的值。</li>
</ul>
<h3 id="二进制类型"><a href="#二进制类型" class="headerlink" title="二进制类型"></a>二进制类型</h3><p>BLOB类型：二进制大对象，可以存储图片、声音、视频等文件。</p>
<ul>
<li>blob：小的，最大长度65535个字节</li>
<li>mediumblob：中等的，最大长度16777215个字节</li>
<li>longblob：大的，最大长度4GB的字节</li>
</ul>
<h2 id="增删改表结构DDL"><a href="#增删改表结构DDL" class="headerlink" title="增删改表结构DDL"></a>增删改表结构DDL</h2><h3 id="创建一个学生表"><a href="#创建一个学生表" class="headerlink" title="创建一个学生表"></a>创建一个学生表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">  <span class="keyword">no</span> <span class="type">bigint</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  age <span class="type">int</span> comment <span class="string">&#x27;年龄&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="查看建表语句"><a href="#查看建表语句" class="headerlink" title="查看建表语句"></a>查看建表语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure>

<h3 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 rename 新表名;</span><br></pre></td></tr></table></figure>

<h3 id="新增字段"><a href="#新增字段" class="headerlink" title="新增字段"></a>新增字段</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">add</span> 字段名 数据类型;</span><br></pre></td></tr></table></figure>

<h3 id="修改字段名"><a href="#修改字段名" class="headerlink" title="修改字段名"></a>修改字段名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 change 旧字段名 新字段名 数据类型;</span><br></pre></td></tr></table></figure>

<h3 id="修改字段数据类型"><a href="#修改字段数据类型" class="headerlink" title="修改字段数据类型"></a>修改字段数据类型</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 modify <span class="keyword">column</span> 字段名 数据类型;</span><br></pre></td></tr></table></figure>

<h3 id="删除字段"><a href="#删除字段" class="headerlink" title="删除字段"></a>删除字段</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 <span class="keyword">drop</span> 字段名;</span><br></pre></td></tr></table></figure>



<h2 id="DML语句"><a href="#DML语句" class="headerlink" title="DML语句"></a>DML语句</h2><p>当我们对表中的数据进行增删改的时候，称它为DML语句。（数据操纵语言），主要包括：insert、delete、update</p>
<h3 id="insert-增"><a href="#insert-增" class="headerlink" title="insert 增"></a>insert 增</h3><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(字段名<span class="number">1</span>,字段名<span class="number">2</span>,字段名<span class="number">3</span>,...) <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,...);</span><br></pre></td></tr></table></figure>

<p>表名后面的小括号当中的字段名如果省略掉，表示自动将所有字段都列出来了，并且字段的顺序和建表时的顺序一致。<br>一般为了可读性强，建议把字段名写上。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名 <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,...);</span><br></pre></td></tr></table></figure>

<p>一次可以插入多条记录：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_stu(<span class="keyword">no</span>,name,age) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;jack&#x27;</span>,<span class="number">20</span>),(<span class="number">2</span>,<span class="string">&#x27;lucy&#x27;</span>,<span class="number">30</span>);</span><br></pre></td></tr></table></figure>



<h3 id="delete-删"><a href="#delete-删" class="headerlink" title="delete 删"></a>delete 删</h3><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 将所有记录全部删除</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名;</span><br><span class="line"></span><br><span class="line"># 删除符合条件的记录</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<p>以上的删除属于DML的方式删除，这种删除的数据是可以通过事务回滚的方式重新恢复的，但是删除的效率较低。（这种删除是支持事务的。）<br>另外还有一种删除表中数据的方式，但是这种方式不支持事务，不可以回滚，删了之后数据是永远也找不回来了。这种删除叫做：表被截断。<br>注意：这个语句删除效率非常高，巨大的表，瞬间干掉所有数据。但不可恢复。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名;</span><br></pre></td></tr></table></figure>



<h3 id="update-改"><a href="#update-改" class="headerlink" title="update 改"></a>update 改</h3><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>, 字段名<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>, 字段名<span class="number">3</span><span class="operator">=</span>值<span class="number">3</span> <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<p>如果没有更新条件的话，所有记录全部更新。</p>
<h2 id="约束constraint"><a href="#约束constraint" class="headerlink" title="约束constraint"></a>约束constraint</h2><p>创建表时，可以给表的字段添加约束，可以保证数据的完整性、有效性。比如大家上网注册用户时常见的：用户名不能为空。对不起，用户名已存在。等提示信息。<br>约束通常包括：</p>
<ul>
<li>非空约束：not null</li>
<li>检查约束：check</li>
<li>唯一性约束：unique</li>
<li>主键约束：primary key</li>
<li>外键约束：foreign key</li>
</ul>
<h3 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h3><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_stu(</span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">  age <span class="type">int</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>name字段不能为空。插入数据时如果没有给name指定值，则报错。</p>
<h3 id="检查约束"><a href="#检查约束" class="headerlink" title="检查约束"></a>检查约束</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_stu(</span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  age <span class="type">int</span>,</span><br><span class="line">  <span class="keyword">check</span>(age <span class="operator">&gt;</span> <span class="number">18</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="唯一性约束"><a href="#唯一性约束" class="headerlink" title="唯一性约束"></a>唯一性约束</h3><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_stu(</span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  email <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">unique</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>email字段设置为唯一性，唯一性的字段值是可以为NULL的。但不能重复。以上在字段后面添加的约束，叫做列级约束。<br>当然，添加约束还有另一种方式：表级约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_stu(</span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  email <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  <span class="keyword">unique</span>(email)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>使用表级约束可以为多个字段添加联合唯一。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_stu(</span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  email <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  <span class="keyword">unique</span>(name,email)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>创建约束时也可以给约束起名字，将来可以通过约束的名字来删除约束：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_stu(</span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  email <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  <span class="keyword">constraint</span> t_stu_name_email_unique <span class="keyword">unique</span>(name,email)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>所有的约束都存储在一个系统表当中：table_constraints。这个系统表在这个数据库当中：information_schema</p>
<h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h3><ol>
<li>主键：primary key，简称PK</li>
<li>主键约束的字段不能为NULL，并且不能重复。</li>
<li>任何一张表都应该有主键，没有主键的表可以视为无效表。</li>
<li>主键值是这行记录的身份证号，是唯一标识。在数据库表中即使两条数据一模一样，但由于主键值不同，我们也会认为是两条完全的不同的数据。</li>
<li>主键分类：<ol>
<li>根据字段数量分类：<ol>
<li>单一主键（1个字段作为主键）&#x3D;&#x3D;&gt;建议的</li>
<li>复合主键（2个或2个以上的字段作为主键）</li>
</ol>
</li>
<li>根据业务分类：<ol>
<li>自然主键（主键和任何业务都无关，只是一个单纯的自然数据）&#x3D;&#x3D;&#x3D;&gt;建议的</li>
<li>业务主键（主键和业务挂钩，例如：银行卡账号作为主键）</li>
</ol>
</li>
</ol>
</li>
<li>单一主键（建议使用这种方式）</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">  id <span class="type">bigint</span> <span class="keyword">primary</span> key,</span><br><span class="line">  sno <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">unique</span>,</span><br><span class="line">  sname <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>复合主键（很少用，了解）</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span>,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">  age <span class="type">int</span>,</span><br><span class="line">  <span class="keyword">primary</span> key(<span class="keyword">no</span>,name)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>主键自增：既然主键值是一个自然的数字，mysql为主键值提供了一种自增机制，不需要我们程序员维护，mysql自动维护该字段</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_vip(</span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><ol>
<li>有这样一个需求：要求设计表，能够存储学生以及学校信息。<ol>
<li>第一种方案：一张表</li>
</ol>
</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679198700192-73c1c697-39a5-483e-b267-730fb808082d.png#averageHue=%23f2f58e&clientId=uf7a0608d-b7a1-4&from=paste&height=263&id=u385df011&originHeight=263&originWidth=881&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11603&status=done&style=shadow&taskId=u6a97350e-9ae3-4c6d-b1ec-963559ebf2e&title=&width=881" alt="image.png"><br>这种方式会导致数据冗余，浪费空间。</p>
<pre><code>  2. 第二种方案：两张表：一张存储学生，一张存储学校
</code></pre>
<p>t_school 表<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679198814824-520944e2-5b83-49ba-97e7-b8830286127a.png#averageHue=%23c9d481&clientId=uf7a0608d-b7a1-4&from=paste&height=85&id=ud1ad0346&originHeight=85&originWidth=471&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2397&status=done&style=shadow&taskId=u76cd09e9-9753-41f7-81d7-729db7c551a&title=&width=471" alt="image.png"><br>t_student 表<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679198856678-a80be906-abc8-4bf7-ac5e-e6a59b11c48a.png#averageHue=%23f3f77a&clientId=uf7a0608d-b7a1-4&from=paste&height=264&id=ufa1ef2a6&originHeight=264&originWidth=532&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4445&status=done&style=shadow&taskId=u30eaa682-24a0-4b6f-a1c5-3eed3bc24cc&title=&width=532" alt="image.png"><br>如果采用以上两张表存储数据，对于学生表来说，sno这个字段的值是不能随便填的，这个sno是学校编号，必须要求这个字段中的值来自学校表的sno。<br>为了达到要求，此时就必须要给t_student表的sno字段添加外键约束了。</p>
<ol start="2">
<li>外键约束：foreign key，简称FK。</li>
<li>添加了外键约束的字段中的数据必须来自其他字段，不能随便填。</li>
<li>假设给a字段添加了外键约束，要求a字段中的数据必须来自b字段，b字段不一定是主键，但至少要有唯一性。</li>
<li>外键约束可以给单个字段添加，叫做单一外键。也可以给多个字段联合添加，叫做复合外键。复合外键很少用。</li>
<li>a表如果引用b表中的数据，可以把b表叫做父表，把a表叫做子表。<ol>
<li>创建表时，先创建父表，再创建子表。</li>
<li>插入数据时，先插入父表，在插入子表。</li>
<li>删除数据时，先删除子表，再删除父表。</li>
<li>删除表时，先删除子表，再删除父表。</li>
</ol>
</li>
<li>如何添加外键：</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_school( </span><br><span class="line">  sno <span class="type">int</span> <span class="keyword">primary</span> key, </span><br><span class="line">  sname <span class="type">varchar</span>(<span class="number">255</span>) </span><br><span class="line">); </span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student( </span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span> <span class="keyword">primary</span> key, </span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>), </span><br><span class="line">  age <span class="type">int</span>, </span><br><span class="line">  sno <span class="type">int</span>, </span><br><span class="line">  <span class="keyword">constraint</span> t_school_sno_fk <span class="keyword">foreign</span> key(sno) <span class="keyword">references</span> t_school(sno) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<ol start="8">
<li>级联删除</li>
</ol>
<p>创建子表时，外键可以添加：on delete cascade，这样在删除父表数据时，子表会级联删除。谨慎使用。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student( </span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span> <span class="keyword">primary</span> key, </span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>), </span><br><span class="line">  age <span class="type">int</span>, </span><br><span class="line">  sno <span class="type">int</span>, </span><br><span class="line">  <span class="keyword">constraint</span> t_school_sno_fk <span class="keyword">foreign</span> key(sno) <span class="keyword">references</span> t_school(sno) <span class="keyword">on</span> <span class="keyword">delete</span> cascade </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">###删除约束</span><br><span class="line">alert <span class="keyword">table</span> t_student <span class="keyword">drop</span> <span class="keyword">foreign</span> key t_student_sno_fk;</span><br><span class="line">###添加约束</span><br><span class="line">alert <span class="keyword">table</span> t_student <span class="keyword">add</span> <span class="keyword">constraint</span> t_student_sno_fk <span class="keyword">foreign</span> key(sno) <span class="keyword">references</span> t_school(sno) <span class="keyword">on</span> <span class="keyword">delete</span> cascade;</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>级联更新</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student( </span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span> <span class="keyword">primary</span> key, </span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>), </span><br><span class="line">  age <span class="type">int</span>, </span><br><span class="line">  sno <span class="type">int</span>, </span><br><span class="line">  <span class="keyword">constraint</span> t_school_sno_fk <span class="keyword">foreign</span> key(sno) <span class="keyword">references</span> t_school(sno) <span class="keyword">on</span> <span class="keyword">update</span> cascade </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ol start="10">
<li>级联置空</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student( </span><br><span class="line">  <span class="keyword">no</span> <span class="type">int</span> <span class="keyword">primary</span> key, </span><br><span class="line">  name <span class="type">varchar</span>(<span class="number">255</span>), </span><br><span class="line">  age <span class="type">int</span>, </span><br><span class="line">  sno <span class="type">int</span>, </span><br><span class="line">  <span class="keyword">constraint</span> t_school_sno_fk <span class="keyword">foreign</span> key(sno) <span class="keyword">references</span> t_school(sno) <span class="keyword">on</span> <span class="keyword">delete</span> <span class="keyword">set</span> <span class="keyword">null</span> </span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h1 id="三范式"><a href="#三范式" class="headerlink" title="三范式"></a>三范式</h1><h2 id="什么是数据库设计三范式"><a href="#什么是数据库设计三范式" class="headerlink" title="什么是数据库设计三范式"></a>什么是数据库设计三范式</h2><p>数据库表设计的原则。教你怎么设计数据库表有效，并且节省空间。</p>
<h2 id="三范式-1"><a href="#三范式-1" class="headerlink" title="三范式"></a>三范式</h2><ol>
<li>第一范式：任何一张表都应该有主键，每个字段是原子性的不能再分<ol>
<li>以下表的设计不符合第一范式：无主键，并且联系方式可拆分。</li>
</ol>
</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679201425169-4ce0b510-2795-4ac8-a0ca-404ffcb6c044.png#averageHue=%23e6e2df&clientId=uf7a0608d-b7a1-4&from=paste&height=99&id=udf5679c6&originHeight=99&originWidth=429&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4785&status=done&style=shadow&taskId=ua7237fee-83ff-44dd-82a6-53445c89cce&title=&width=429" alt="image.png"></p>
<pre><code>  2. 应该这样设计：
</code></pre>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679201619568-bcb56e54-e4d5-4152-9833-49d97afa8d35.png#averageHue=%23dcdad8&clientId=uf7a0608d-b7a1-4&from=paste&height=106&id=ua1de331d&originHeight=106&originWidth=455&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5704&status=done&style=shadow&taskId=ua7aef1c7-2585-4b7f-8bdc-d468b6f5e71&title=&width=455" alt="image.png"></p>
<ol start="2">
<li>第二范式：建立在第一范式基础上的，另外要求所有非主键字段完全依赖主键，不能产生部分依赖<ol>
<li>以下表存储了学生和老师的信息</li>
</ol>
</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679201885946-02cacd49-4288-4520-93fb-e4dae6cff5dc.png#averageHue=%23e3e2e2&clientId=uf7a0608d-b7a1-4&from=paste&height=127&id=u841b84e0&originHeight=127&originWidth=440&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4331&status=done&style=shadow&taskId=ua875c093-5656-40b7-bb25-7cd52eb2197&title=&width=440" alt="image.png"><br>虽然符合第一范式，但是违背了第二范式，学生姓名、老师姓名都产生了部分依赖。导致数据冗余。</p>
<pre><code>  2. 以下这种设计方式就是符合第二范式的：
</code></pre>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679202122322-da28bdc0-703b-4975-8fe4-0a7b6a222fee.png#averageHue=%23efefef&clientId=uf7a0608d-b7a1-4&from=paste&height=258&id=u6726dbc4&originHeight=258&originWidth=662&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6393&status=done&style=shadow&taskId=uec7f9cf8-9d6f-47fd-8585-4d896c74e0d&title=&width=662" alt="image.png"></p>
<ol start="3">
<li>第三范式：建立在第二范式基础上的，非主键字段不能传递依赖于主键字段<ol>
<li>以下设计方式就是违背第三范式的</li>
</ol>
</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679202299108-66198c2a-933d-4bea-9e67-51425c31be7c.png#averageHue=%23e2e2e1&clientId=uf7a0608d-b7a1-4&from=paste&height=129&id=uc7c79455&originHeight=129&originWidth=435&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4338&status=done&style=shadow&taskId=u2f464a3a-5a10-4004-89bf-b89b7144111&title=&width=435" alt="image.png"><br>以上因为产生了传递依赖，导致班级名称冗余。</p>
<pre><code>  2. 以下这种方式就是符合第三范式的：
</code></pre>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679202402829-5040060c-c87f-4411-a599-6a60cc3836a0.png#averageHue=%23e8e7e7&clientId=uf7a0608d-b7a1-4&from=paste&height=270&id=u5495ef35&originHeight=270&originWidth=325&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5610&status=done&style=shadow&taskId=u197e8a0c-3b3f-4627-a574-464a40a019f&title=&width=325" alt="image.png"></p>
<h2 id="一对多怎么设计"><a href="#一对多怎么设计" class="headerlink" title="一对多怎么设计"></a>一对多怎么设计</h2><p>口诀：一对多两张表，多的表加外键。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679200526299-5a9122fe-b7f6-423c-9fd8-5c28a960cb75.png#averageHue=%23cad480&clientId=uf7a0608d-b7a1-4&from=paste&height=84&id=u7e79770c&originHeight=84&originWidth=474&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2499&status=done&style=shadow&taskId=u67f05804-f17a-41aa-b626-21638d20ef9&title=&width=474" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679200546241-3a0db05e-74e8-4452-92b9-721c5b3d36d5.png#averageHue=%23f4f779&clientId=uf7a0608d-b7a1-4&from=paste&height=262&id=ue4c12bca&originHeight=262&originWidth=533&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6129&status=done&style=shadow&taskId=uf2d1bb71-1993-4ccf-b8ae-cc8c3e51671&title=&width=533" alt="image.png"></p>
<h2 id="多对多怎么设计"><a href="#多对多怎么设计" class="headerlink" title="多对多怎么设计"></a>多对多怎么设计</h2><p>多对多三张表，关系表添加外键。<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679200858013-26513a66-0af8-4b84-bd90-b52a240de65c.png#averageHue=%23efe9e9&clientId=uf7a0608d-b7a1-4&from=paste&height=283&id=ucc864c99&originHeight=283&originWidth=944&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14583&status=done&style=shadow&taskId=u5e882710-c0a4-4a2c-b02f-fc57a3e10de&title=&width=944" alt="image.png"></p>
<h2 id="一对一怎么设计"><a href="#一对一怎么设计" class="headerlink" title="一对一怎么设计"></a>一对一怎么设计</h2><p>两种方案：</p>
<ol>
<li>第一种：主键共享</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679201037367-a1b5661a-f127-42b0-87d9-609c61fa4839.png#averageHue=%23ededaa&clientId=uf7a0608d-b7a1-4&from=paste&height=111&id=u82a64286&originHeight=111&originWidth=501&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2087&status=done&style=shadow&taskId=u60e60695-8178-4aae-9c1b-1d9bf3b165d&title=&width=501" alt="image.png"></p>
<ol start="2">
<li>第二种：外键唯一</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679201084526-c5773a4e-75bf-4e6d-9ac4-f8b8272d1b46.png#averageHue=%23e6e6e6&clientId=uf7a0608d-b7a1-4&from=paste&height=115&id=ufe1dc281&originHeight=115&originWidth=697&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2496&status=done&style=shadow&taskId=u50c9eb60-c470-4498-ab25-2aa5f736dbd&title=&width=697" alt="image.png"></p>
<h2 id="最终的设计"><a href="#最终的设计" class="headerlink" title="最终的设计"></a>最终的设计</h2><p>最终以满足客户需求为原则，有的时候会拿空间换速度。</p>
<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><ol>
<li>只能将select语句创建为视图。</li>
<li>创建视图</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> v_emp <span class="keyword">as</span> <span class="keyword">select</span> e.ename,d.dname <span class="keyword">from</span> emp e <span class="keyword">join</span> dept d <span class="keyword">on</span> e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>视图作用<ol>
<li>如果开发中有一条非常复杂的SQL，而这个SQL在多处使用，会给开发和维护带来成本。使用视图可以降低开发和维护的成本。</li>
<li>视图可以隐藏表的字段名。</li>
</ol>
</li>
<li>修改视图</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> v_emp <span class="keyword">as</span> <span class="keyword">select</span> e.ename,d.dname,d.deptno <span class="keyword">from</span> emp e <span class="keyword">join</span> dept d <span class="keyword">on</span> e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>删除视图<ol>
<li>drop view if exists v_emp;</li>
</ol>
</li>
<li>对视图增删改（DML：insert delete update）可以影响到原表数据。</li>
</ol>
<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><h2 id="事务概述"><a href="#事务概述" class="headerlink" title="事务概述"></a>事务概述</h2><ol>
<li>事务是一个最小的工作单元。在数据库当中，事务表示一件完整的事儿。</li>
<li>一个业务的完成可能需要多条DML语句共同配合才能完成，例如转账业务，需要执行两条DML语句，先更新张三账户的余额，再更新李四账户的余额，为了保证转账业务不出现问题，就必须保证要么同时成功，要么同时失败，怎么保证同时成功或者同时失败呢？就需要使用事务机制。</li>
<li>也就是说用了事务机制之后，在同一个事务当中，多条DML语句会同时成功，或者同时失败，不会出现一部分成功，一部分失败的现象。</li>
<li>事务只针对DML语句有效：因为只有这三个语句是改变表中数据的。<ol>
<li>insert</li>
<li>delete</li>
<li>update</li>
</ol>
</li>
</ol>
<h2 id="事务四大特性：ACID"><a href="#事务四大特性：ACID" class="headerlink" title="事务四大特性：ACID"></a>事务四大特性：ACID</h2><ol>
<li>原子性（Atomicity）：是指事务包含的所有操作要么全部成功，要么同时失败。</li>
<li>一致性（Consistency）：是指事务开始前，和事务完成后，数据应该是一致的。例如张三和李四的钱加起来是5000，中间不管进行过多少次的转账操作(update)，总量5000是不会变的。这就是事务的一致性。</li>
<li>隔离性（Isolation）：隔离性是当多个⽤户并发访问数据库时，⽐如操作同⼀张表时，数据库为每⼀个⽤户开启的事务，不能被其他事务的操作所⼲扰，多个并发事务之间要相互隔离。</li>
<li>持久性（Durability）：持久性是指⼀个事务⼀旦被提交了，那么对数据库中的数据的改变就是永久性的，即便是在数据库系统遇到故障的情况下也不会丢失提交事务的操作。</li>
</ol>
<h2 id="演示MySQL事务"><a href="#演示MySQL事务" class="headerlink" title="演示MySQL事务"></a>演示MySQL事务</h2><p>在dos命令窗口中开启MySQL事务：start transaction; 或者：begin;<br>回滚事务：rollback;<br>提交事务：commit;<br>只要执行以上的rollback或者commit，事务都会结束。<br>MySQL默认情况下采用的事务机制是：自动提交。所谓自动提交就是只要执行一条DML语句则提交一次。</p>
<h2 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h2><p><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679213953232-4c17a795-8b1f-45d2-907b-c5c16aff672d.png#averageHue=%23e6e3e1&clientId=u5f51673a-a60a-4&from=paste&height=203&id=ue588be16&originHeight=203&originWidth=788&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16611&status=done&style=shadow&taskId=uca6fc90a-5745-4c38-aa5b-62e77ac8997&title=&width=788" alt="image.png"><br><strong>隔离级别从低到高排序：读未提交 &lt; 读提交 &lt; 可重复读 &lt; 串行化**<br>**不同隔离级别会存在不同的现象，现象按照严重性从高到低排序：脏读 &gt; 不可重复读 &gt; 幻读</strong></p>
<h3 id="查看与设置隔离级别"><a href="#查看与设置隔离级别" class="headerlink" title="查看与设置隔离级别"></a>查看与设置隔离级别</h3><p>mysql默认的隔离级别：可重复读（REPEATABLE READ）。</p>
<ul>
<li>查看当前会话的隔离级别：select @@transaction_isolation;</li>
<li>查看全局的隔离级别：select @@gobal.transaction_isolation;</li>
</ul>
<p>设置事务隔离级别：</p>
<ul>
<li>会话级：set session transaction isolation level read committed;</li>
<li>全局级：set global transaction isolation level read committed;</li>
</ul>
<h3 id="不同现象"><a href="#不同现象" class="headerlink" title="不同现象"></a>不同现象</h3><h4 id="脏读"><a href="#脏读" class="headerlink" title="脏读"></a>脏读</h4><p>指的是一个事务读取了另一个事务尚未提交的数据，即读取了另一个事务中的脏数据（Dirty Data）。在此情况下，如果另一个事务回滚了或者修改了这些数据，那么读取这些脏数据的事务所处理的数据就是不准确的。</p>
<h4 id="不可重复读"><a href="#不可重复读" class="headerlink" title="不可重复读"></a>不可重复读</h4><p>指在一个事务内，多次读取同一个数据行，得到的结果可能是不一样的。这是由于其他事务对数据行做出了修改操作，导致数据的不一致性。</p>
<h4 id="幻读"><a href="#幻读" class="headerlink" title="幻读"></a>幻读</h4><p>指在事务执行过程中，前后两次相同的查询条件得到的结果集不一致，可能会变多或变少。</p>
<h3 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h3><h4 id="读未提交（READ-UNCOMMITTED）"><a href="#读未提交（READ-UNCOMMITTED）" class="headerlink" title="读未提交（READ UNCOMMITTED）"></a>读未提交（READ UNCOMMITTED）</h4><p>A事务与B事务，A事务可以读取到B事务未提交的数据。这是最低的隔离级别。几乎两个事务之间没有隔离。这种隔离级别是一种理论层面的，在实际的数据库产品中，没有从这个级别起步的。<br>当事务隔离级别是读未提交时，三种现象都存在：脏读，不可重复读，幻读。<br>我们可以开启两个DOS命令窗口，模拟两个事务，演示一下这种隔离级别。三种现象中最严重的是脏读，我们只需要演示脏读问题即可，因为存在脏读的话，就一定存在不可重复读和幻读问题。</p>
<p>将全局事务隔离级别设置为：READ UNCOMMITTED</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read uncommitted;</span><br></pre></td></tr></table></figure>

<p>开启两个DOS命令窗口来模拟两个事务：A事务与B事务。</p>
<table>
<thead>
<tr>
<th><strong>A事务</strong></th>
<th><strong>B事务</strong></th>
</tr>
</thead>
<tbody><tr>
<td>mysql&gt; use powernode</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; use powernode</td>
</tr>
<tr>
<td>mysql&gt; start transaction;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; start transaction;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709003498399-02e4239e-9064-4437-b331-8358459f8fd5.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=191&id=u3b49db14&originHeight=191&originWidth=291&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4424&status=done&style=shadow&taskId=ub68d2077-9c02-449a-9055-5854c835313&title=&width=291" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; insert into a values(4);</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709003545498-a496e1be-74fd-4e63-9ef0-d6e21b88a7cd.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=217&id=uebb288b9&originHeight=217&originWidth=289&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4600&status=done&style=shadow&taskId=ubb205019-9e90-432c-ab0e-6eb163886d5&title=&width=289" alt="image.png"></td>
<td></td>
</tr>
</tbody></table>
<p>通过以上测试，可以看到，A事务读取到了B事务还没有提交的数据。这种现象就是脏读。</p>
<h4 id="读提交（READ-COMMITTED）"><a href="#读提交（READ-COMMITTED）" class="headerlink" title="读提交（READ COMMITTED）"></a>读提交（READ COMMITTED）</h4><p>A事务与B事务，A事务可以读取到B事务提交之后的数据。Oracle数据库默认的就是这种隔离级别。</p>
<p>将数据库的全局事务隔离级别设置为读提交：READ COMMITTED</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level read committed;</span><br></pre></td></tr></table></figure>

<p>演示：</p>
<table>
<thead>
<tr>
<th><strong>A事务</strong></th>
<th><strong>B事务</strong></th>
</tr>
</thead>
<tbody><tr>
<td>mysql&gt; use powernode</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; use powernode</td>
</tr>
<tr>
<td>mysql&gt; start transaction;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; start transaction;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709003985270-00489f1c-e135-4bd6-aa08-84cdddf6f007.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=191&id=u5d9d9ed4&originHeight=191&originWidth=289&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4388&status=done&style=shadow&taskId=ub714d0fd-c9f2-48d8-9130-c4b0827471a&title=&width=289" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; insert into a values(4);</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709003985270-00489f1c-e135-4bd6-aa08-84cdddf6f007.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=191&id=yl5zF&originHeight=191&originWidth=289&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4388&status=done&style=shadow&taskId=ub714d0fd-c9f2-48d8-9130-c4b0827471a&title=&width=289" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; commit;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709004165277-dac7bc73-55ba-4034-bd48-b975689ffb41.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=214&id=ucc8e1eca&originHeight=214&originWidth=298&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4626&status=done&style=shadow&taskId=u2cac7a44-ba45-4bd7-86c2-2d280c9de57&title=&width=298" alt="image.png"></td>
<td></td>
</tr>
</tbody></table>
<p>通过以上测试看出，A事务只能读取到B事务提交之后的数据。这种隔离级别解决了脏读问题，但肯定是存在不可重复读和幻读问题。因为只要事务B进行了增删改操作之后并提交了，事务A读取到的数据肯定是不同的。即：不可重复读和幻读都存在。</p>
<h4 id="可重复读（REPEATABLE-READ）"><a href="#可重复读（REPEATABLE-READ）" class="headerlink" title="可重复读（REPEATABLE READ）"></a>可重复读（REPEATABLE READ）</h4><p>这个隔离级别是MySQL数据库默认的。<br>A事务和B事务，A事务开启后，读取了某一条记录，然后B事务对这条记录进行修改并提交，A事务读取到的还是修改前的数据。这种隔离级别称为可重复读。</p>
<p>将数据库全局隔离级别修改为可重复读：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level repeatable read;</span><br></pre></td></tr></table></figure>

<p>演示：</p>
<table>
<thead>
<tr>
<th><strong>A事务</strong></th>
<th><strong>B事务</strong></th>
</tr>
</thead>
<tbody><tr>
<td>mysql&gt; use powernode</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; use powernode</td>
</tr>
<tr>
<td>mysql&gt; start transaction;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; start transaction;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select empno,ename,sal from emp where empno&#x3D;7369;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709005877270-b84cdf55-866b-4b3b-b575-46552dfb84c0.png#averageHue=%23151312&clientId=u0fbbe02e-04ac-4&from=paste&height=109&id=u9a905011&originHeight=109&originWidth=344&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5276&status=done&style=shadow&taskId=u85710df6-3409-4242-a3d5-92ea27f7fc2&title=&width=344" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; update emp set ename&#x3D;’SMITH’,sal&#x3D;8000 where empno&#x3D;7369;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; commit;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select empno,ename,sal from emp where empno&#x3D;7369;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709005948358-4f23bd69-d6ed-4963-a349-ba35ecc61dc0.png#averageHue=%23151311&clientId=u0fbbe02e-04ac-4&from=paste&height=145&id=ub810f157&originHeight=145&originWidth=336&originalType=binary&ratio=1&rotation=0&showTitle=false&size=7381&status=done&style=shadow&taskId=ud25e00ad-83dc-4fa2-9858-de459ea77f8&title=&width=336" alt="image.png"></td>
<td></td>
</tr>
</tbody></table>
<p>通过以上测试得知：当事务隔离级别设置为可重复读时，避免了不可重复读问题。</p>
<p>那么在MySQL当中，当事务隔离级别设置为可重复读时，能够避免幻读问题吗？测试一下：</p>
<table>
<thead>
<tr>
<th><strong>事务A</strong></th>
<th><strong>事务B</strong></th>
</tr>
</thead>
<tbody><tr>
<td>mysql&gt; use powernode</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; use powernode</td>
</tr>
<tr>
<td>mysql&gt; start transaction;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; start transaction;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709006316610-12c48e73-e894-49dc-8dfd-32f8d13ec991.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=218&id=ud9dadda5&originHeight=218&originWidth=298&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4645&status=done&style=shadow&taskId=ua4e22c07-45ef-467a-9a47-c66b5a21472&title=&width=298" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; insert into a values(5);</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; commit;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709006362804-0579079b-e054-4299-b1ab-6c16a68875f0.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=218&id=u4c4264a7&originHeight=218&originWidth=297&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4643&status=done&style=shadow&taskId=ua8b9a51a-306e-4b30-afdf-c88138fa2a7&title=&width=297" alt="image.png"></td>
<td></td>
</tr>
</tbody></table>
<p>通过以上测试得知：<strong>当事务隔离级别设置为可重复读时，也避免了幻读问题。是完全避免了幻读问题吗？并不是。</strong>请看以下测试：</p>
<table>
<thead>
<tr>
<th><strong>事务A</strong></th>
<th><strong>事务B</strong></th>
</tr>
</thead>
<tbody><tr>
<td>mysql&gt; use powernode</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; use powernode</td>
</tr>
<tr>
<td>mysql&gt; start transaction;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; start transaction;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709006612649-1614f4b7-446f-487d-9c1b-000a7e5589d3.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=241&id=ud98016d5&originHeight=241&originWidth=288&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4986&status=done&style=shadow&taskId=u400d7356-cb23-442b-bf41-3a6c7851f3a&title=&width=288" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; insert into a values(6);</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; commit;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a <strong>for update;</strong></td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709006674069-b52a691f-2cc1-4721-bf23-0451f4bb7535.png#averageHue=%230e0d0d&clientId=u0fbbe02e-04ac-4&from=paste&height=269&id=uaeabeaf9&originHeight=269&originWidth=295&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5453&status=done&style=shadow&taskId=u127a2aaf-fd6d-421c-be74-3f50b8fa988&title=&width=295" alt="image.png"></td>
<td></td>
</tr>
</tbody></table>
<p>通过以上测试得知：<strong>当事务隔离级别设置为可重复读，MySQL会尽最大努力避免幻读问题，但这种隔离级别无法完全避免幻读问题。</strong></p>
<h4 id="串行化（SERIALIZABLE）"><a href="#串行化（SERIALIZABLE）" class="headerlink" title="串行化（SERIALIZABLE）"></a>串行化（SERIALIZABLE）</h4><p>这种隔离级别最高，避免了所有的问题，缺点是效率低，因为这种隔离级别会导致事务排队处理，不支持并发。</p>
<p>设置数据库全局隔离级别为串行化：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level serializable;</span><br></pre></td></tr></table></figure>

<p>演示：</p>
<table>
<thead>
<tr>
<th><strong>事务A</strong></th>
<th><strong>事务B</strong></th>
</tr>
</thead>
<tbody><tr>
<td>mysql&gt; use powernode</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; use powernode</td>
</tr>
<tr>
<td>mysql&gt; start transaction;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; start transaction;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709013080885-bf7ad024-3bdd-4497-997b-1bdc2c81a7da.png#averageHue=%230e0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=262&id=u98eae3de&originHeight=262&originWidth=292&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5406&status=done&style=shadow&taskId=u7fd54c94-2d24-4710-a2f2-4eb6a0f50ad&title=&width=292" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td>mysql&gt; insert into a values(7);</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709013571200-5bfdf9a5-8238-4601-92b7-5eacbd2de16f.png#averageHue=%230e0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=122&id=ubd8c88a4&originHeight=122&originWidth=284&originalType=binary&ratio=1&rotation=0&showTitle=false&size=2887&status=done&style=shadow&taskId=u18918bf7-edf5-48f1-95c0-21c1e7ae7e7&title=&width=284" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td>mysql&gt; commit;</td>
<td></td>
</tr>
<tr>
<td></td>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709013621752-5b81823b-362d-4cdc-8b49-f941eebd827f.png#averageHue=%230e0d0d&clientId=u0fbbe02e-04ac-4&from=paste&height=288&id=ufcf1f12d&originHeight=288&originWidth=297&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5866&status=done&style=shadow&taskId=u385c19ee-7e7d-43de-8d5d-e9cee03e4e4&title=&width=297" alt="image.png"></td>
</tr>
</tbody></table>
<p>通过以上测试得知：当事务隔离级别设置为串行化时，事务只能排队执行，不支持并发。</p>
<h3 id="可重复读的幻读问题"><a href="#可重复读的幻读问题" class="headerlink" title="可重复读的幻读问题"></a>可重复读的幻读问题</h3><p>在上面讲解过程中我提到，MySQL默认的隔离级别可重复读，在很大程度上避免了幻读问题（并不能完全解决），那么它是如何解决幻读问题的呢，解决方案包括两种：</p>
<ul>
<li>针对<strong>快照读</strong>（普通 select 语句），是<strong>通过 MVCC 方式解决了幻读</strong>，因为可重复读隔离级别下，事务执行过程中看到的数据，一直跟这个事务启动时看到的数据是一致的，即使中途有其他事务插入了一条数据，是查询不出来这条数据的，所以就很好的避免了幻读问题。</li>
<li>针对<strong>当前读</strong>（select … for update 等语句），是<strong>通过 next-key lock（记录锁+间隙锁）方式解决了幻读</strong>，因为当执行 select … for update 语句的时候，会加上 next-key lock，如果有其他事务在 next-key lock 锁范围内插入了一条记录，那么这个插入语句就会被阻塞，无法成功插入，所以就很好的避免了幻读问题。</li>
</ul>
<h4 id="快照读是如何解决幻读的"><a href="#快照读是如何解决幻读的" class="headerlink" title="快照读是如何解决幻读的"></a>快照读是如何解决幻读的</h4><p>什么是快照读？普通的select语句都是采用的快照读。顾名思义：在整个事务的处理过程中，执行相同的一个select语句时，每次都是读取的快照。（快照指的是固定的某个时刻的数据，就像现实世界中的拍照一样，把那个美好的时刻留下来）。也就是说，当事务隔离级别是可重复读，并且执行的select语句是一个普通的select语句时，都会采用快照读的方式读取数据，底层实现原理是：</p>
<ul>
<li>底层由 MVCC（多版本并发控制）实现，实现的方式是开始事务后，在执行第一个查询语句后，会创建一个 Read View，后续的查询语句利用这个 Read View，通过这个 Read View 就可以在 undo log 版本链找到事务开始时的数据，所以事务过程中每次查询的数据都是一样的，即使中途有其他事务插入了新纪录，是查询不出来这条数据的，所以就很好的避免了幻读问题。</li>
</ul>
<p>演示：</p>
<table>
<thead>
<tr>
<th><strong>事务A</strong></th>
<th><strong>事务B</strong></th>
</tr>
</thead>
<tbody><tr>
<td>mysql&gt; use powernode</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; use powernode</td>
</tr>
<tr>
<td>mysql&gt; start transaction;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; start transaction;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a; &#x2F;&#x2F;快照读</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709006316610-12c48e73-e894-49dc-8dfd-32f8d13ec991.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=218&id=mdmNA&originHeight=218&originWidth=298&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4645&status=done&style=shadow&taskId=ua4e22c07-45ef-467a-9a47-c66b5a21472&title=&width=298" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; insert into a values(5);</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; commit;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a; &#x2F;&#x2F;快照读</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709006362804-0579079b-e054-4299-b1ab-6c16a68875f0.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=218&id=sxE0q&originHeight=218&originWidth=297&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4643&status=done&style=shadow&taskId=ua8b9a51a-306e-4b30-afdf-c88138fa2a7&title=&width=297" alt="image.png"></td>
<td></td>
</tr>
</tbody></table>
<h4 id="当前读是如何解决幻读的"><a href="#当前读是如何解决幻读的" class="headerlink" title="当前读是如何解决幻读的"></a>当前读是如何解决幻读的</h4><p>当前读，顾名思义：每一次都读取最新的数据。当前读包括：update、delete、insert、select…for update。这个很好理解，因为增删改的时候都要基于最新的数据进行增删改。<br>而select…for update原理是：对查询范围内的数据进行加锁，不允许其它事务对这个范围内的数据进行增删改。也就是说这个select语句范围内的数据是不允许并发的，只能排队执行，从而避免幻读问题。<br>select…for update加的锁叫做：next-key lock。我们可以称其为：间隙锁 + 记录锁。间隙锁用来保证在锁定的范围内不允许insert操作。记录锁用来保证在锁定的范围内不允许delete和update操作。</p>
<p>假如有这样的数据：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709020549539-138b4715-5526-45df-8db2-65d05b393ba1.png#averageHue=%23fbfafa&clientId=u0fbbe02e-04ac-4&from=paste&height=100&id=u99c5080d&originHeight=100&originWidth=137&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1043&status=done&style=shadow&taskId=u5dc4d53d-1b0b-4c0d-9c33-a1e5e7f2afb&title=&width=137" alt="image.png"><br>SQL语句是这样写的：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> a <span class="keyword">where</span> id <span class="keyword">between</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">4</span> <span class="keyword">for</span> <span class="keyword">update</span>;</span><br></pre></td></tr></table></figure>

<p>那么id在[2-4]区间的所有记录行被锁定，不能插入3是通过间隙锁来搞定的。不能修改或删除2和4是通过记录锁来搞定的。</p>
<p>演示：</p>
<table>
<thead>
<tr>
<th><strong>事务A</strong></th>
<th><strong>事务B</strong></th>
</tr>
</thead>
<tbody><tr>
<td>mysql&gt; use powernode</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; use powernode</td>
</tr>
<tr>
<td>mysql&gt; start transaction;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; start transaction;</td>
</tr>
<tr>
<td>mysql&gt; select * from a where id between 2 and 4 for update; &#x2F;&#x2F; 当前读</td>
<td></td>
</tr>
<tr>
<td></td>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709020966550-4d8580bc-d1f4-48c9-b7e3-26be1acf1bd2.png#averageHue=%23100f0e&clientId=u0fbbe02e-04ac-4&from=paste&height=82&id=u8e7603b6&originHeight=82&originWidth=395&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3402&status=done&style=shadow&taskId=u2b45bd7b-d1f9-4e07-8579-11c81f9f062&title=&width=395" alt="image.png"></td>
</tr>
</tbody></table>
<h4 id="出现幻读的两种情况"><a href="#出现幻读的两种情况" class="headerlink" title="出现幻读的两种情况"></a>出现幻读的两种情况</h4><p>在同一个事务处理过程中，如果前后两次都采用快照读，或者都采用当前读，则不会出现幻读问题。如果第一次使用快照读，后面使用了当前读，则会出现幻读问题。</p>
<h5 id="第一种产生幻读的场景"><a href="#第一种产生幻读的场景" class="headerlink" title="第一种产生幻读的场景"></a>第一种产生幻读的场景</h5><p>A事务与B事务。在A事务中第一次查询使用快照读，B事务插入数据。然后在A事务中第二次查询使用当前读。则会产生幻读现象。<br>演示：</p>
<table>
<thead>
<tr>
<th><strong>事务A</strong></th>
<th><strong>事务B</strong></th>
</tr>
</thead>
<tbody><tr>
<td>mysql&gt; use powernode</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; use powernode</td>
</tr>
<tr>
<td>mysql&gt; start transaction;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; start transaction;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709021313528-7b3b88fd-836a-4223-8b93-ef671edf6f2b.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=187&id=u7e8f9872&originHeight=187&originWidth=301&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4297&status=done&style=shadow&taskId=u49199bba-6760-4fad-9615-dc3c6eaf1ca&title=&width=301" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; insert into a values(5);</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; commit;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a for update; &#x2F;&#x2F; 产生了幻读</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709021386345-1b47e39d-98e6-42de-bf33-1652ed601c21.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=213&id=uaadf86ec&originHeight=213&originWidth=303&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4605&status=done&style=shadow&taskId=u18140f69-1a56-44c7-9d4f-83517e41e56&title=&width=303" alt="image.png"></td>
<td></td>
</tr>
</tbody></table>
<h5 id="第二种产生幻读的场景"><a href="#第二种产生幻读的场景" class="headerlink" title="第二种产生幻读的场景"></a>第二种产生幻读的场景</h5><p>事务A与事务B，在事务A中第一次查询使用快照读，在事务B中插入一条数据，然后在事务A中更新事务B插入的那条记录，最后在事务A中再次使用快照读。则会发生幻读现象。</p>
<table>
<thead>
<tr>
<th><strong>事务A</strong></th>
<th><strong>事务B</strong></th>
</tr>
</thead>
<tbody><tr>
<td>mysql&gt; use powernode</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; use powernode</td>
</tr>
<tr>
<td>mysql&gt; start transaction;</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; start transaction;</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a;</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709021721456-7e0dd695-29c8-4e2f-a88e-4a1fa2d1df90.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=214&id=ufc5ef576&originHeight=214&originWidth=292&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4581&status=done&style=shadow&taskId=u6f2cda2c-b92a-43bf-8471-dd0a074293e&title=&width=292" alt="image.png"></td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; insert into a values(6);</td>
</tr>
<tr>
<td></td>
<td>mysql&gt; commit;</td>
</tr>
<tr>
<td>mysql&gt; update a set id&#x3D;100 where id&#x3D;6; &#x2F;&#x2F;主要是因为这个SQL语句的执行触发了当前读</td>
<td></td>
</tr>
<tr>
<td></td>
<td>mysql&gt; select * from a; &#x2F;&#x2F; 产生了幻读</td>
</tr>
<tr>
<td><img src="https://cdn.nlark.com/yuque/0/2024/png/21376908/1709021824472-00989fbd-471a-4f5f-a44a-9781652cd3b3.png#averageHue=%230f0e0d&clientId=u0fbbe02e-04ac-4&from=paste&height=243&id=u11717d5c&originHeight=243&originWidth=293&originalType=binary&ratio=1&rotation=0&showTitle=false&size=5106&status=done&style=shadow&taskId=u336e9c35-982b-4abd-8342-88cea428ea0&title=&width=293" alt="image.png"></td>
<td></td>
</tr>
</tbody></table>
<h4 id="总结可重复读的幻读问题"><a href="#总结可重复读的幻读问题" class="headerlink" title="总结可重复读的幻读问题"></a>总结可重复读的幻读问题</h4><p>MySQL的可重复读隔离级别（默认隔离级），根据不同的查询方式，分别提出了避免幻读的方案：</p>
<ul>
<li>针对快照读（普通 select 语句），是通过 MVCC 方式解决了幻读。</li>
<li>针对当前读（select … for update 等语句），是通过 next-key lock（记录锁+间隙锁）方式解决了幻读。</li>
</ul>
<p>我举例了两个发生幻读场景的例子。</p>
<ul>
<li>第一个例子：对于快照读， MVCC 并不能完全避免幻读现象。因为当事务 A 更新了一条事务 B 插入的记录，那么事务 A 前后两次查询的记录条目就不一样了，所以就发生幻读。</li>
<li>第二个例子：对于当前读，如果事务开启后，并没有执行当前读，而是先快照读，然后这期间如果其他事务插入了一条记录，那么事务后续使用当前读进行查询的时候，就会发现两次查询的记录条目就不一样了，所以就发生幻读。</li>
</ul>
<p>所以，MySQL 可重复读隔离级别并没有彻底解决幻读，只是很大程度上避免了幻读现象的发生。<br>要避免这类特殊场景下发生幻读的现象的话，就是尽量在开启事务之后，马上执行 select … for update 这类当前读的语句，因为它会对记录加 next-key lock，从而避免其他事务插入一条新记录。</p>
<h1 id="DBA命令"><a href="#DBA命令" class="headerlink" title="DBA命令"></a>DBA命令</h1><h2 id="新建用户"><a href="#新建用户" class="headerlink" title="新建用户"></a>新建用户</h2><p>创建一个用户名为java1，密码设置为123的本地用户：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;java1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>创建一个用户名为java2，密码设置为123的外网用户：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;java2&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>采用以上方式新建的用户没有任何权限：系统表也只能看到以下两个<br><img src="https://cdn.nlark.com/yuque/0/2023/png/21376908/1679813363625-10cc7c30-76b3-4a1a-a83f-a1727489a420.png#averageHue=%23141211&clientId=u8834b383-d147-4&from=paste&height=197&id=u9bbde222&originHeight=197&originWidth=318&originalType=binary&ratio=1&rotation=0&showTitle=false&size=6925&status=done&style=shadow&taskId=ub1483b88-60e6-4eac-a9d2-c1eb024463f&title=&width=318" alt="image.png"><br>使用root用户查看系统中当前用户有哪些？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>,host <span class="keyword">from</span> mysql.user;</span><br></pre></td></tr></table></figure>



<h2 id="给用户授权"><a href="#给用户授权" class="headerlink" title="给用户授权"></a>给用户授权</h2><p>授权语法：grant [权限1，权限2…] on 库名.表名 to ‘用户名‘@’主机名&#x2F;IP地址’;<br>给本地用户授权：grant [权限1，权限2…] on 库名.表名 to ‘用户名‘@’localhost’;<br>给外网用户授权：grant [权限1，权限2…] on 库名.表名 to ‘用户名‘@’%’;<br>所有权限：all privileges<br>细粒度权限：select、insert、delete、update、alter、create、drop、index(索引)、usage(登录权限)……<br>库名可以使用 * ，它代表所有数据库<br>表名可以采用 * ，它代表所有表<br>也可以提供具体的数据库和表，例如：powernode.emp （powernode数据库的emp表）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 将所有库所有表的查询权限赋予本地用户java1</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>,<span class="keyword">insert</span>,<span class="keyword">delete</span>,<span class="keyword">update</span>,<span class="keyword">create</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;java1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 将powernode库中所有表的所有权限赋予本地用户java1</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> powernode.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;java1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>授权后必须刷新权限，才能生效：flush privileges<br>查看某个用户拥有哪些权限？<br>show grants for ‘java1‘@’localhost’<br>show grants for ‘java2‘@’%’</p>
<p>with grant option：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">with</span> <span class="keyword">grant</span> option的作用是：java2用户也可以给其他用户授权了。</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>,<span class="keyword">insert</span>,<span class="keyword">delete</span>,<span class="keyword">update</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;java2&#x27;</span>@<span class="string">&#x27;%&#x27;</span> <span class="keyword">with</span> <span class="keyword">grant</span> option;</span><br></pre></td></tr></table></figure>



<h2 id="撤销用户权限"><a href="#撤销用户权限" class="headerlink" title="撤销用户权限"></a>撤销用户权限</h2><p>revoke 权限 on 数据库名.表名 from ‘用户‘@’IP地址’;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 撤销本地用户java1的<span class="keyword">insert</span>、<span class="keyword">update</span>、<span class="keyword">delete</span>权限</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">insert</span>, <span class="keyword">update</span>, <span class="keyword">delete</span> <span class="keyword">on</span> powernode.<span class="operator">*</span> <span class="keyword">from</span> <span class="string">&#x27;java1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span></span><br><span class="line"></span><br><span class="line"># 撤销外网用户java2的<span class="keyword">insert</span>权限</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">insert</span> <span class="keyword">on</span> powernode.<span class="operator">*</span> <span class="keyword">from</span> <span class="string">&#x27;java2&#x27;</span>@<span class="string">&#x27;%&#x27;</span></span><br></pre></td></tr></table></figure>

<p>撤销权限后也需要刷新权限：flush privileges</p>
<p>注意：撤销权限时 “数据库名.表名” 不能随便写，要求和授权语句时的 “数据库名.表名” 一致。</p>
<h2 id="修改用户的密码"><a href="#修改用户的密码" class="headerlink" title="修改用户的密码"></a>修改用户的密码</h2><p>具有管理用户权限的用户才能修改密码，例如root账户可以修改其他账户的密码：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 本地用户修改密码</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;java1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;456&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 外网用户修改密码</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> <span class="string">&#x27;java2&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;456&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>修改密码后，也需要刷新权限才能生效：flush privileges<br>以上是MySQL8版本以后修改用户密码的方式。</p>
<h2 id="修改用户名"><a href="#修改用户名" class="headerlink" title="修改用户名"></a>修改用户名</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="keyword">user</span> <span class="string">&#x27;原始用户名&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="keyword">to</span> <span class="string">&#x27;新用户名&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">rename <span class="keyword">user</span> <span class="string">&#x27;原始用户名&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="keyword">to</span> <span class="string">&#x27;新用户名&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">rename <span class="keyword">user</span> <span class="string">&#x27;java1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="keyword">to</span> <span class="string">&#x27;java11&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">rename <span class="keyword">user</span> <span class="string">&#x27;java11&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="keyword">to</span> <span class="string">&#x27;java123&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>flush privileges;</p>
<h2 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">&#x27;java123&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">&#x27;java2&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>flush privileges;</p>
<h1 id="数据备份"><a href="#数据备份" class="headerlink" title="数据备份"></a>数据备份</h1><ul>
<li>导出数据（请在登录mysql数据库之前进行）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 导出powernode这个数据库中所有的表</span><br><span class="line">mysqldump powernode <span class="operator">&gt;</span> e:<span class="operator">/</span>powernode.sql <span class="operator">-</span>uroot <span class="operator">-</span>p1234 <span class="comment">--default-character-set=utf8</span></span><br><span class="line"></span><br><span class="line"># 导出powernode中emp表的数据</span><br><span class="line">mysqldump powernode emp <span class="operator">&gt;</span> e:<span class="operator">/</span>powernode.sql <span class="operator">-</span>uroot <span class="operator">-</span>p1234 <span class="comment">--default-character-set=utf8</span></span><br></pre></td></tr></table></figure>

<ul>
<li>导入数据第一种方式：（请在登录mysql之前进行）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 现在登录mysql状态下新建一个数据库</span><br><span class="line"><span class="keyword">create</span> database powernode;</span><br><span class="line"># 在登录mysql之前执行以下命令</span><br><span class="line">mysql powernode <span class="operator">&lt;</span> e:<span class="operator">/</span>powernode.sql <span class="operator">-</span>uroot <span class="operator">-</span>p1234 <span class="comment">--default-character-set=utf8</span></span><br></pre></td></tr></table></figure>

<ul>
<li>导入数据第二种方式：（请在登录mysql之后操作）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span>  database powernode;</span><br><span class="line">use powernode;</span><br><span class="line">source d:<span class="operator">/</span>powernode.sql</span><br></pre></td></tr></table></figure>

</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/mysql/">mysql</a></div><div class="post-share"><div class="social-share" data-image="/image/icon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/06/02/mysql%E9%AB%98%E7%BA%A7/" title="mysql 高级"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">mysql 高级</div></div><div class="info-2"><div class="info-item-1">存储过程概述数据库中内置的一种编程语言，可以把多条SQL语句以逻辑代码的方式串联起来执行。 每一个存储过程都是一个数据库对象，就像table和view一样，存储在数据库中，一次编译永久有效。每一个存储过程都有自己的名字，客户端程序通过名字来调用存储过程。 在数据量特别大的情况下使用存储过程能达到倍速的效率提升。 优缺点优点：速度快。   - 降低了**应用服务器**和**数据库服务器**之间网络通讯的开销。尤其在数据量庞大的情况下效果显著。  缺点：移植性差。编写难度大。维护性差。   - 每一个数据库都有自己的存储过程的语法规则，这种语法规则不是通用的。一旦使用了存储过程，则数据库产品很难更换，例如：编写了mysql的存储过程，这段代码只能在mysql中运行，无法在oracle数据库中运行。   -...</div></div></div></a><a class="pagination-related" href="/2025/04/25/javase%20%E6%95%B0%E7%BB%84/" title="javase 数组"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">javase 数组</div></div><div class="info-2"><div class="info-item-1">四、数组数组概述 数组是引用数据类型，隐式继承Object，因此可以调用Object类中的方法 数组对象存储在堆内存中  数组的特点 数组长度一旦确定不可改变 所有数组对象都有length属性，用来获取数组元素个数  优点：  根据下标查找某个元素的效率极高  缺点：  随机增删的效率低，需要后移&#x2F;前移很多元素 无法存储大量数据，因为很难在内存上找到非常大的一块连续内存  一维数组静态初始化一维数组已经知道数组中的值时使用 1234// 第一种int[] arr = &#123;11,22,33&#125;; 或者 int arr[] = &#123;11,22,33&#125;; //后者不建议// 第二种int[] arr = new int[] &#123;11,22,33&#125;;  用第一种就好了！ JDK5 新特性：增强for循环 &#x2F; for-each 循环123for(元素数据类型 变量名:数组名)&#123; // 变量名代表数组中的每个元素，可以自己取名   ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/06/02/mysql%E9%AB%98%E7%BA%A7/" title="mysql 高级"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-06-02</div><div class="info-item-2">mysql 高级</div></div><div class="info-2"><div class="info-item-1">存储过程概述数据库中内置的一种编程语言，可以把多条SQL语句以逻辑代码的方式串联起来执行。 每一个存储过程都是一个数据库对象，就像table和view一样，存储在数据库中，一次编译永久有效。每一个存储过程都有自己的名字，客户端程序通过名字来调用存储过程。 在数据量特别大的情况下使用存储过程能达到倍速的效率提升。 优缺点优点：速度快。   - 降低了**应用服务器**和**数据库服务器**之间网络通讯的开销。尤其在数据量庞大的情况下效果显著。  缺点：移植性差。编写难度大。维护性差。   - 每一个数据库都有自己的存储过程的语法规则，这种语法规则不是通用的。一旦使用了存储过程，则数据库产品很难更换，例如：编写了mysql的存储过程，这段代码只能在mysql中运行，无法在oracle数据库中运行。   -...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/image/icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">eric_zht</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/erichtz"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%E6%93%8D%E4%BD%9C"><span class="toc-text">第一步操作</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-text">MySQL命令行基本命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%9A%84%E6%A6%82%E8%BF%B0"><span class="toc-text">数据库表的概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE"><span class="toc-text">初始化数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2DQL%E4%B8%93%E9%A2%98"><span class="toc-text">查询DQL专题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2"><span class="toc-text">简单查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5"><span class="toc-text">查一个字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%97%B6%E5%AD%97%E6%AE%B5%E5%8F%AF%E5%8F%82%E4%B8%8E%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97"><span class="toc-text">查询时字段可参与数学运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%97%B6%E5%AD%97%E6%AE%B5%E5%8F%AF%E8%B5%B7%E5%88%AB%E5%90%8D"><span class="toc-text">查询时字段可起别名</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#as%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">as关键字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9C%81%E7%95%A5as%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">省略as关键字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%AB%E5%90%8D%E4%B8%AD%E6%9C%89%E7%A9%BA%E6%A0%BC"><span class="toc-text">别名中有空格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%AB%E5%90%8D%E4%B8%AD%E6%9C%89%E4%B8%AD%E6%96%87"><span class="toc-text">别名中有中文</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-text">条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-text">条件查询语法格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%89%E4%BA%8E%E3%80%81%E4%B8%8D%E7%AD%89%E4%BA%8E"><span class="toc-text">等于、不等于</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AD%89%E4%BA%8E"><span class="toc-text">等于 &#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E7%AD%89%E4%BA%8E-%E6%88%96"><span class="toc-text">不等于 &lt;&gt; 或 !&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E4%BA%8E%E3%80%81%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E%E3%80%81%E5%B0%8F%E4%BA%8E%E3%80%81%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8E"><span class="toc-text">大于、大于等于、小于、小于等于</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%A7%E4%BA%8E"><span class="toc-text">大于 &gt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E"><span class="toc-text">大于等于 &gt;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E4%BA%8E"><span class="toc-text">小于 &lt;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8E"><span class="toc-text">小于等于 &lt;&#x3D;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#and"><span class="toc-text">and</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#or"><span class="toc-text">or</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#and%E5%92%8Cor%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7%E9%97%AE%E9%A2%98"><span class="toc-text">and和or的优先级问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#between%E2%80%A6and%E2%80%A6"><span class="toc-text">between…and…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#is-null%E3%80%81is-not-null"><span class="toc-text">is null、is not null</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#is-null"><span class="toc-text">is null</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#is-not-null"><span class="toc-text">is not null</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#in%E3%80%81not-in"><span class="toc-text">in、not in</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#in"><span class="toc-text">in</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#not-in"><span class="toc-text">not in</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#in%E3%80%81not-in-%E4%B8%8E-NULL"><span class="toc-text">in、not in 与 NULL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#in%E5%92%8Cor%E7%9A%84%E6%95%88%E7%8E%87%E9%97%AE%E9%A2%98"><span class="toc-text">in和or的效率问题</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2like"><span class="toc-text">模糊查询like</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%93%8D%E4%BD%9C"><span class="toc-text">排序操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%B8%80%E5%AD%97%E6%AE%B5%E5%8D%87%E5%BA%8F"><span class="toc-text">单一字段升序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%B8%80%E5%AD%97%E6%AE%B5%E9%99%8D%E5%BA%8F"><span class="toc-text">单一字段降序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E9%87%87%E7%94%A8%E5%8D%87%E5%BA%8F"><span class="toc-text">默认采用升序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8E%92%E5%BA%8F"><span class="toc-text">多个字段排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#where%E5%92%8Corder-by%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="toc-text">where和order by的位置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#distinct%E5%8E%BB%E9%87%8D"><span class="toc-text">distinct去重</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-text">数据处理函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E5%85%B3"><span class="toc-text">字符串相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E5%A4%A7%E5%86%99upper%E5%92%8Cucase"><span class="toc-text">转大写upper和ucase</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E5%B0%8F%E5%86%99lower%E5%92%8Clcase"><span class="toc-text">转小写lower和lcase</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2substr"><span class="toc-text">截取字符串substr</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6length"><span class="toc-text">获取字符串长度length</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6%E7%9A%84%E4%B8%AA%E6%95%B0char-length"><span class="toc-text">获取字符的个数char_length</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5"><span class="toc-text">字符串拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%89%8D%E5%90%8E%E7%A9%BA%E7%99%BDtrim"><span class="toc-text">去除字符串前后空白trim</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E7%9B%B8%E5%85%B3"><span class="toc-text">数字相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#rand-%E5%92%8Crand-x"><span class="toc-text">rand()和rand(x)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#round-x-%E5%92%8Cround-x-y-%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5"><span class="toc-text">round(x)和round(x,y)四舍五入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#truncate-x-y-%E8%88%8D%E5%8E%BB"><span class="toc-text">truncate(x, y)舍去</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ceil%E4%B8%8Efloor"><span class="toc-text">ceil与floor</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E5%A4%84%E7%90%86"><span class="toc-text">空处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="toc-text">日期和时间相关函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4"><span class="toc-text">获取当前日期和时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E6%97%A5%E6%9C%9F"><span class="toc-text">获取当前日期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4"><span class="toc-text">获取当前时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%8D%95%E7%8B%AC%E7%9A%84%E5%B9%B4%E3%80%81%E6%9C%88%E3%80%81%E6%97%A5%E3%80%81%E6%97%B6%E3%80%81%E5%88%86%E3%80%81%E7%A7%92"><span class="toc-text">获取单独的年、月、日、时、分、秒</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#date-add%E5%87%BD%E6%95%B0"><span class="toc-text">date_add函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#date-format%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%87%BD%E6%95%B0"><span class="toc-text">date_format日期格式化函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#str-to-date%E5%87%BD%E6%95%B0"><span class="toc-text">str_to_date函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dayofweek%E3%80%81dayofmonth%E3%80%81dayofyear%E5%87%BD%E6%95%B0"><span class="toc-text">dayofweek、dayofmonth、dayofyear函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#last-day%E5%87%BD%E6%95%B0"><span class="toc-text">last_day函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#datediff%E5%87%BD%E6%95%B0"><span class="toc-text">datediff函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#timediff%E5%87%BD%E6%95%B0"><span class="toc-text">timediff函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#if%E5%87%BD%E6%95%B0"><span class="toc-text">if函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cast%E5%87%BD%E6%95%B0"><span class="toc-text">cast函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E5%AF%86%E5%87%BD%E6%95%B0"><span class="toc-text">加密函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-text">分组函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#max"><span class="toc-text">max</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#min"><span class="toc-text">min</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#avg"><span class="toc-text">avg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sum"><span class="toc-text">sum</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#count"><span class="toc-text">count</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0%E7%BB%84%E5%90%88%E4%BD%BF%E7%94%A8"><span class="toc-text">分组函数组合使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">分组函数注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-text">分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#group-by"><span class="toc-text">group by</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#having"><span class="toc-text">having</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E5%86%85%E6%8E%92%E5%BA%8F"><span class="toc-text">组内排序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E5%8D%95%E8%A1%A8%E7%9A%84DQL%E8%AF%AD%E5%8F%A5"><span class="toc-text">总结单表的DQL语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">什么是连接查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">连接查询的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%E7%8E%B0%E8%B1%A1"><span class="toc-text">笛卡尔积现象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-text">内连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E5%8F%AB%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-text">什么叫内连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%E4%B9%8B%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-text">内连接之等值连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%E4%B9%8B%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-text">内连接之非等值连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%E4%B9%8B%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-text">内连接之自连接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-text">外连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E5%8F%AB%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-text">什么叫外连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5%E4%B9%8B%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%88%E5%B7%A6%E8%BF%9E%E6%8E%A5%EF%BC%89"><span class="toc-text">外连接之左外连接（左连接）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5%E4%B9%8B%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%88%E5%8F%B3%E8%BF%9E%E6%8E%A5%EF%BC%89"><span class="toc-text">外连接之右外连接（右连接）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E8%BF%9E%E6%8E%A5"><span class="toc-text">全连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E5%BC%A0%E8%A1%A8%E8%BF%9E%E6%8E%A5"><span class="toc-text">多张表连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">什么是子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#where%E5%90%8E%E9%9D%A2%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">where后面使用子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#from%E5%90%8E%E9%9D%A2%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">from后面使用子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#select%E5%90%8E%E9%9D%A2%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-text">select后面使用子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#exists%E3%80%81not-exists"><span class="toc-text">exists、not exists</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#in%E5%92%8Cexists%E5%8C%BA%E5%88%AB"><span class="toc-text">in和exists区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#union-union-all"><span class="toc-text">union&amp;union all</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#limit"><span class="toc-text">limit</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A1%A8%E7%9B%B8%E5%85%B3"><span class="toc-text">表相关</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-text">创建表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-text">插入数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-text">删除表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">MySQL数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">整数类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">浮点数类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E7%82%B9%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">定点数类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B"><span class="toc-text">日期和时间类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-text">字符串类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#char"><span class="toc-text">char</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#varchar"><span class="toc-text">varchar</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#text"><span class="toc-text">text</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#enum"><span class="toc-text">enum</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#set"><span class="toc-text">set</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%B1%BB%E5%9E%8B"><span class="toc-text">二进制类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E%E5%88%A0%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84DDL"><span class="toc-text">增删改表结构DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%AD%A6%E7%94%9F%E8%A1%A8"><span class="toc-text">创建一个学生表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BB%BA%E8%A1%A8%E8%AF%AD%E5%8F%A5"><span class="toc-text">查看建表语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D"><span class="toc-text">修改表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%AD%97%E6%AE%B5"><span class="toc-text">新增字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E5%90%8D"><span class="toc-text">修改字段名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">修改字段数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5"><span class="toc-text">删除字段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML%E8%AF%AD%E5%8F%A5"><span class="toc-text">DML语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#insert-%E5%A2%9E"><span class="toc-text">insert 增</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#delete-%E5%88%A0"><span class="toc-text">delete 删</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#update-%E6%94%B9"><span class="toc-text">update 改</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9Fconstraint"><span class="toc-text">约束constraint</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-text">非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F"><span class="toc-text">检查约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-text">唯一性约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">主键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">外键约束</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-text">三范式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-text">什么是数据库设计三范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E8%8C%83%E5%BC%8F-1"><span class="toc-text">三范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1"><span class="toc-text">一对多怎么设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1"><span class="toc-text">多对多怎么设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1"><span class="toc-text">一对一怎么设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E7%BB%88%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-text">最终的设计</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-text">视图</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%A6%82%E8%BF%B0"><span class="toc-text">事务概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7%EF%BC%9AACID"><span class="toc-text">事务四大特性：ACID</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BC%94%E7%A4%BAMySQL%E4%BA%8B%E5%8A%A1"><span class="toc-text">演示MySQL事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-text">事务隔离级别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E4%B8%8E%E8%AE%BE%E7%BD%AE%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-text">查看与设置隔离级别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E7%8E%B0%E8%B1%A1"><span class="toc-text">不同现象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%84%8F%E8%AF%BB"><span class="toc-text">脏读</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="toc-text">不可重复读</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B9%BB%E8%AF%BB"><span class="toc-text">幻读</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-text">隔离级别</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BB%E6%9C%AA%E6%8F%90%E4%BA%A4%EF%BC%88READ-UNCOMMITTED%EF%BC%89"><span class="toc-text">读未提交（READ UNCOMMITTED）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BB%E6%8F%90%E4%BA%A4%EF%BC%88READ-COMMITTED%EF%BC%89"><span class="toc-text">读提交（READ COMMITTED）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%EF%BC%88REPEATABLE-READ%EF%BC%89"><span class="toc-text">可重复读（REPEATABLE READ）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%B2%E8%A1%8C%E5%8C%96%EF%BC%88SERIALIZABLE%EF%BC%89"><span class="toc-text">串行化（SERIALIZABLE）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E7%9A%84%E5%B9%BB%E8%AF%BB%E9%97%AE%E9%A2%98"><span class="toc-text">可重复读的幻读问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E7%85%A7%E8%AF%BB%E6%98%AF%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%B9%BB%E8%AF%BB%E7%9A%84"><span class="toc-text">快照读是如何解决幻读的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BD%93%E5%89%8D%E8%AF%BB%E6%98%AF%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%B9%BB%E8%AF%BB%E7%9A%84"><span class="toc-text">当前读是如何解决幻读的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BA%E7%8E%B0%E5%B9%BB%E8%AF%BB%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%83%85%E5%86%B5"><span class="toc-text">出现幻读的两种情况</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E4%BA%A7%E7%94%9F%E5%B9%BB%E8%AF%BB%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">第一种产生幻读的场景</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E4%BA%A7%E7%94%9F%E5%B9%BB%E8%AF%BB%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">第二种产生幻读的场景</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E7%9A%84%E5%B9%BB%E8%AF%BB%E9%97%AE%E9%A2%98"><span class="toc-text">总结可重复读的幻读问题</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#DBA%E5%91%BD%E4%BB%A4"><span class="toc-text">DBA命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-text">新建用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%99%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83"><span class="toc-text">给用户授权</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%92%A4%E9%94%80%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90"><span class="toc-text">撤销用户权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E7%9A%84%E5%AF%86%E7%A0%81"><span class="toc-text">修改用户的密码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%90%8D"><span class="toc-text">修改用户名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-text">删除用户</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD"><span class="toc-text">数据备份</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/02/app_class_2025_sum/exp4/" title="移动软件开发 实验4：口述校史">移动软件开发 实验4：口述校史</a><time datetime="2025-09-01T16:00:00.000Z" title="发表于 2025-09-02 00:00:00">2025-09-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/01/app_class_2025_sum/exp3/" title="移动软件开发 实验3：微信小程序云开发">移动软件开发 实验3：微信小程序云开发</a><time datetime="2025-08-31T16:00:00.000Z" title="发表于 2025-09-01 00:00:00">2025-09-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/26/app_class_2025_sum/exp2/" title="移动软件开发 实验2：天气查询小程序">移动软件开发 实验2：天气查询小程序</a><time datetime="2025-08-25T16:00:00.000Z" title="发表于 2025-08-26 00:00:00">2025-08-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/08/25/app_class_2025_sum/exp1/" title="移动软件开发 实验1：第一个微信小程序">移动软件开发 实验1：第一个微信小程序</a><time datetime="2025-08-24T16:00:00.000Z" title="发表于 2025-08-25 00:00:00">2025-08-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/24/Redis/" title="Redis">Redis</a><time datetime="2025-07-23T16:00:00.000Z" title="发表于 2025-07-24 00:00:00">2025-07-24</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://pic.imgdb.cn/item/6741310cd29ded1a8c7a7799.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By eric_zht</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>